---
title: Exchange での認証と EWS
manager: sethgros
ms.date: 03/9/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 9a83df96-aca0-42b3-b8f5-2b414f0363f1
description: Exchange を対象とする EWS アプリケーションの適切な認証基準の選択に役立つ情報を紹介します。
ms.openlocfilehash: a4aae4678f1d6ffa5c08350f0bcccce5a4885f20
ms.sourcegitcommit: 9061fcf40c218ebe88911783f357b7df278846db
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/28/2018
ms.locfileid: "21353666"
---
# <a name="authentication-and-ews-in-exchange"></a><span data-ttu-id="b4dea-103">Exchange での認証と EWS</span><span class="sxs-lookup"><span data-stu-id="b4dea-103">Authentication and EWS in Exchange</span></span>

<span data-ttu-id="b4dea-104">Exchange を対象とする EWS アプリケーションの適切な認証基準の選択に役立つ情報を紹介します。</span><span class="sxs-lookup"><span data-stu-id="b4dea-104">Find information to help you choose the right authentication standard for your EWS application that targets Exchange.</span></span>
  
<span data-ttu-id="b4dea-p101">認証は、Exchange Web サービス (EWS) アプリケーションの主要な部分の 1 つです。Exchange Online、Office 365 の一部としての Exchange Online、および Exchange 2013 以降のオンプレミス バージョンの Exchange では、アプリケーションと Exchange サーバー間の通信をセキュリティで保護するため、標準的な Web 認証プロトコルをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="b4dea-p101">Authentication is a key part of your Exchange Web Services (EWS) application. Exchange Online, Exchange Online as part of Office 365, and on-premises versions of Exchange starting with Exchange Server 2013 support standard web authentication protocols to help secure the communication between your application and the Exchange server.</span></span>
  
<span data-ttu-id="b4dea-107">Exchange Online を対象にしている場合は、選択した認証方法で HTTPS を使用して、アプリケーションが送信する要求と応答を暗号化する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b4dea-107">If you're targeting Exchange Online, the authentication method that you choose must use HTTPS to encrypt the requests and responses that your application sends.</span></span> <span data-ttu-id="b4dea-108">オンプレミスの Exchange サーバーでは HTTP を使用できますが、アプリケーションと Exchange サーバー間の通信をセキュリティで保護するために、アプリケーションが EWS のエンドポイントに送信するすべての要求で HTTPS を使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="b4dea-108">If you’re targeting Exchange Online, the authentication method that you choose must use HTTPS to encrypt the requests and responses that your application sends. Although you can use HTTP with Exchange on-premises servers, we recommend that you use HTTPS for any request that your application sends to an EWS endpoint to help secure communication between your application and an Exchange server.</span></span>
  
<span data-ttu-id="b4dea-109">Exchange には認証オプションが用意されており、次の中から選択できます。</span><span class="sxs-lookup"><span data-stu-id="b4dea-109">Exchange provides the following authentication options for you to choose from:</span></span> 
  
- <span data-ttu-id="b4dea-110">OAuth 2.0 (Exchange Online のみ)</span><span class="sxs-lookup"><span data-stu-id="b4dea-110">OAuth 2.0 (Exchange Online only)</span></span>
    
- <span data-ttu-id="b4dea-111">NTLM (オンプレミスの Exchange のみ)</span><span class="sxs-lookup"><span data-stu-id="b4dea-111">NTLM (Exchange on-premises only)</span></span>
    
- <span data-ttu-id="b4dea-112">基本 (推奨されていません)</span><span class="sxs-lookup"><span data-stu-id="b4dea-112">Basic (no longer recommended)</span></span>
    
<span data-ttu-id="b4dea-113">選択する認証方法は、Exchange Online またはオンプレミスの Exchange を使用しているかどうか、および OAuth トークンを発行できるサードパーティのプロバイダーへのアクセス権があるかどうかという、組織のセキュリティ要件によって異なります。</span><span class="sxs-lookup"><span data-stu-id="b4dea-113">The authentication method that you choose depends on the security requirements of your organization, whether you are using Exchange Online or Exchange on-premises, and whether you have access to a third-party provider that can issue OAuth tokens. This article provides information that will help you select the authentication standard that’s right for your application.</span></span> <span data-ttu-id="b4dea-114">この記事では、アプリケーションに適切な認証基準を選択するうえで役立つ情報を提供します。</span><span class="sxs-lookup"><span data-stu-id="b4dea-114">This article provides information that will help you select the authentication standard that's right for your application.</span></span>
  
## <a name="oauth-authentication"></a><span data-ttu-id="b4dea-115">OAuth 認証</span><span class="sxs-lookup"><span data-stu-id="b4dea-115">OAuth authentication</span></span>

<span data-ttu-id="b4dea-p104">すべての新しいアプリケーションで OAuth 標準を使用して、Exchange Online サービスに接続することをお勧めします。アプリケーションに OAuth を実装するためには追加の作業が必要ですが、基本認証に勝るセキュリティ上の利点はそれに見合う価値があります。ただし、レコードに関しては、認識しておくべきデメリットもいくつかあります。</span><span class="sxs-lookup"><span data-stu-id="b4dea-p104">We recommend that all new applications use the OAuth standard to connect to Exchange Online services. The advantage in security over basic authentication is worth the additional work required to implement OAuth in your application. For the record, however, there are also some disadvantages that you should be aware of.</span></span>
  
<span data-ttu-id="b4dea-119">**表 1. OAuth を使用するメリットとデメリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-119">**Table 1.  Advantages and disadvantages of using OAuth**</span></span>

|<span data-ttu-id="b4dea-120">**メリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-120">**Advantages**</span></span>|<span data-ttu-id="b4dea-121">**デメリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-121">**Disadvantages**</span></span>|
|:-----|:-----|
| <span data-ttu-id="b4dea-122">OAuth は業界標準の認証プロトコルです。</span><span class="sxs-lookup"><span data-stu-id="b4dea-122">OAuth is an industry-standard authentication protocol.</span></span><br/><br/><span data-ttu-id="b4dea-p105">認証はサードパーティのプロバイダーによって管理されます。アプリケーションで Exchange の資格情報を収集して保存する必要はありません。</span><span class="sxs-lookup"><span data-stu-id="b4dea-p105">Authentication is managed by a third-party provider. Your application does not have to collect and store the Exchange credentials.</span></span><br/><br/><span data-ttu-id="b4dea-125">アプリケーションは認証プロバイダーから不透明なトークンを受信するだけなので、心配の種は少なくて済みます。そのため、アプリケーションでセキュリティ違反があっても、トークンが公開されるだけでユーザーの Exchange 資格情報が公開されることはありません。</span><span class="sxs-lookup"><span data-stu-id="b4dea-125">Fewer worries for you, because your application only receives an opaque token from the authentication provider; therefore, a security breach in your application can only expose the token, not the user’s Exchange credentials.</span></span>  <br/> | <span data-ttu-id="b4dea-p106">OAuth はサード パーティの認証プロバイダーに依存しています。このためユーザーの組織や顧客に追加のコストが発生します。</span><span class="sxs-lookup"><span data-stu-id="b4dea-p106">OAuth relies on a third-party authentication provider. This can impose additional costs on your organization or your customers.</span></span><br/><br/><span data-ttu-id="b4dea-128">OAuth 標準の実装は基本認証の実装よりも困難です。</span><span class="sxs-lookup"><span data-stu-id="b4dea-128">The OAuth standard is more difficult to implement than basic authentication.</span></span><br/><br/><span data-ttu-id="b4dea-129">OAuth を実装するには、認証プロバイダーと Exchange サーバーの両方にアプリケーションを統合する必要があります。</span><span class="sxs-lookup"><span data-stu-id="b4dea-129">To implement OAuth, you need to integrate your application with both the authentication provider and the Exchange server.</span></span>  <br/> |
   
<span data-ttu-id="b4dea-p107">デメリットを最小限にするには、[Microsoft Azure AD Authentication Library](https://docs.microsoft.com/ja-JP/azure/active-directory/develop/active-directory-authentication-libraries) (ADAL) を使用して、クラウドまたはオンプレミスの Active Directory ドメイン サービス (AD DS) に対してユーザーを認証し、Exchange サーバーへの呼び出しをセキュリティ保護するためのアクセス トークンを取得します。Exchange Online には、ADAL (ただし、任意のサードパーティのライブラリも使用可) でサポートされている Azure Active Directory サービスによって発行されたトークンが必要です。 </span><span class="sxs-lookup"><span data-stu-id="b4dea-p107">To help minimize the disadvantages, you can use the [Microsoft Azure AD Authentication Library](https://docs.microsoft.com/ja-JP/azure/active-directory/develop/active-directory-authentication-libraries) (ADAL) to authenticate users to Active Directory Domain Services (AD DS) in the cloud or on-premises and then obtain access tokens for securing calls to an Exchange server. Exchange Online requires tokens issued by the Azure Active Directory service, which is supported by the ADAL; however, you can use any third-party library.</span></span> 
  
<span data-ttu-id="b4dea-132">EWS アプリケーションで OAuth 認証を使用する方法の詳細については、次のリソースを参照してください。</span><span class="sxs-lookup"><span data-stu-id="b4dea-132">To learn more about using OAuth authentication in your EWS application, see the following resources:</span></span>
  
- <span data-ttu-id="b4dea-133">[Office 365 試用版](https://docs.microsoft.com/ja-JP/office/developer-program/office-365-developer-program)。クライアント アプリケーションのテストに使用する Exchange サーバーをセットアップします。</span><span class="sxs-lookup"><span data-stu-id="b4dea-133">[Office 365 trialhttp://office.microsoft.com/compare-office-365-for-business-plans-FX102918419.aspx?CR_CC=200061904&WT.srch=1&WT.mc_ID=PS_bing_O365Comm_office%20365%20trial_Text](https://docs.microsoft.com/ja-JP/office/developer-program/office-365-developer-program), to set up an Exchange server to use to test your client application.</span></span>
    
- [<span data-ttu-id="b4dea-134">.NET 用 Azure AD Authentication ライブラリ</span><span class="sxs-lookup"><span data-stu-id="b4dea-134">Azure AD Authentication Library for .NET</span></span>](https://docs.microsoft.com/ja-JP/azure/active-directory/develop/active-directory-authentication-libraries)
    
- <span data-ttu-id="b4dea-135">「[Azure Active Directory を構成する](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx)」。アプリケーションでの認証に OAuth トークンを使用できるようにします。</span><span class="sxs-lookup"><span data-stu-id="b4dea-135">[Configure Azure Active Directory](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx), to enable your application to use OAuth tokens for authentication.</span></span>
    
- <span data-ttu-id="b4dea-136">学習できるコード例については、「[OAuth を使用して EWS アプリケーションを認証する](how-to-authenticate-an-ews-application-by-using-oauth.md)」のサンプル コードを確認してください。</span><span class="sxs-lookup"><span data-stu-id="b4dea-136">Review the sample code in How to: Authenticate an EWS application by using OAuth for example code that you can study.</span></span> 
    
## <a name="ntlm-authentication"></a><span data-ttu-id="b4dea-137">NTLM 認証</span><span class="sxs-lookup"><span data-stu-id="b4dea-137">NTLM authentication</span></span>

<span data-ttu-id="b4dea-p108">NTLM 認証が使用できるのは、オンプレミスの Exchange サーバーのみです。会社のファイアウォールの内側で実行されるアプリケーションに対しては、NTLM 認証と .NET Framework 間の統合で、アプリケーションを認証するための組み込みの手段を用意しています。 </span><span class="sxs-lookup"><span data-stu-id="b4dea-p108">NTLM authentication is only available for Exchange on-premises servers. For applications that run inside the corporate firewall, integration between NTLM authentication and the .NET Framework provides a built-in means to authenticate your application.</span></span> 
  
<span data-ttu-id="b4dea-140">**表 2. NTLM 認証を使用するメリットとデメリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-140">**Table 2.  Advantages and disadvantages of using NTLM authentication**</span></span>

|<span data-ttu-id="b4dea-141">**メリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-141">**Advantages**</span></span>|<span data-ttu-id="b4dea-142">**デメリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-142">**Disadvantages**</span></span>|
|:-----|:-----|
| <span data-ttu-id="b4dea-143">“追加設定なし” で Exchange サーバーで機能する。</span><span class="sxs-lookup"><span data-stu-id="b4dea-143">Works "out of the box" with your Exchange server.</span></span> <span data-ttu-id="b4dea-144">[Exchange 管理シェル コマンドレット](how-to-control-access-to-ews-in-exchange.md)を使用して、Exchange サービスへのアクセスを構成できる。</span><span class="sxs-lookup"><span data-stu-id="b4dea-144">Works “out of the box” with your Exchange server. You can configure access to Exchange services by using an [Exchange Management Shell cmdlet](how-to-control-access-to-ews-in-exchange.md).</span></span><br/><br/><span data-ttu-id="b4dea-145">.NET Framework の [CredentialCache](http://msdn2.microsoft.com/ja-JP/library/615e0wsd) オブジェクトを使用して、ユーザーの資格情報を自動的に取得する。</span><span class="sxs-lookup"><span data-stu-id="b4dea-145">Uses the .NET Framework [T:System.Net.CredentialCache](http://msdn2.microsoft.com/ja-JP/library/615e0wsd) object to automatically get the user’s credentials.</span></span><br/><br/><span data-ttu-id="b4dea-146">オンプレミスの Exchange サーバーへの認証にログオン ユーザーの資格情報を使用する[コード サンプルが利用可能](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c)。</span><span class="sxs-lookup"><span data-stu-id="b4dea-146">[Code samples are availablehttp://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c) that use the logged on user’s credentials for authentication to an on-premises Exchange server.</span></span>  <br/> | <span data-ttu-id="b4dea-147">ユーザーは、NTLM 認証を使用するためにドメインにログオンする必要がある。</span><span class="sxs-lookup"><span data-stu-id="b4dea-147">Users must be logged on to a domain to use NTLM authentication.</span></span><br/><br/><span data-ttu-id="b4dea-148">ユーザーのドメイン アカウントに関連付けられていないメール アカウントへのアクセスが困難。</span><span class="sxs-lookup"><span data-stu-id="b4dea-148">It can be difficult to access email accounts that are not associated with the user’s domain account.</span></span><br/><br/><span data-ttu-id="b4dea-149">サービス アプリケーションに、NTLM 認証を利用するためのドメイン アカウントが必要。</span><span class="sxs-lookup"><span data-stu-id="b4dea-149">Service applications must have a domain account to take advantage of NTLM authentication.</span></span>  <br/> |
   
## <a name="basic-authentication"></a><span data-ttu-id="b4dea-150">基本認証</span><span class="sxs-lookup"><span data-stu-id="b4dea-150">Basic authentication</span></span>

<span data-ttu-id="b4dea-p110">基本認証は、クライアント アプリケーションに対して適切な基本レベルのセキュリティを提供します。すべての新しいアプリケーションが認証用に、NTLM または OAuth プロトコルを使用することを強くお勧めします。ただし、状況によっては、基本認証を選択することが適切な場合もあります。</span><span class="sxs-lookup"><span data-stu-id="b4dea-p110">Basic authentication provides a, well, basic level of security for your client application. We do recommend that all new applications use either NTLM or the OAuth protocol for authentication; however, basic authentication can be the correct choice for your application in some circumstances.</span></span>
  
<span data-ttu-id="b4dea-153">**表 3. 基本認証を使用するメリットとデメリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-153">**Table 3.  Advantages and disadvantages of using basic authentication**</span></span>

|<span data-ttu-id="b4dea-154">**メリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-154">**Advantages**</span></span>|<span data-ttu-id="b4dea-155">**デメリット**</span><span class="sxs-lookup"><span data-stu-id="b4dea-155">**Disadvantages**</span></span>|
|:-----|:-----|
| <span data-ttu-id="b4dea-156">“追加設定なし” で Exchange サーバーで機能する。</span><span class="sxs-lookup"><span data-stu-id="b4dea-156">Works "out of the box" with your Exchange server.</span></span> <span data-ttu-id="b4dea-157">[Exchange 管理シェル コマンドレット](how-to-control-access-to-ews-in-exchange.md)を使用して、Exchange サービスへのアクセスを構成できる。</span><span class="sxs-lookup"><span data-stu-id="b4dea-157">Works “out of the box” with your Exchange server. You can configure access to Exchange services by using an [Exchange Management Shell cmdlet](how-to-control-access-to-ews-in-exchange.md).</span></span><br/><br/><span data-ttu-id="b4dea-158">Windows アプリケーションで、ログオン ユーザーの既定の資格情報を使用できる。</span><span class="sxs-lookup"><span data-stu-id="b4dea-158">Windows applications can use the logged on user’s default credentials.</span></span><br/><br/><span data-ttu-id="b4dea-159">基本認証を使用して EWS を呼び出す方法を示す多数の[コード サンプルが利用可能](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c)。</span><span class="sxs-lookup"><span data-stu-id="b4dea-159">Many [code samples are availablehttp://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c](http://code.msdn.microsoft.com/office/Exchange-2013-101-Code-3c38582c) that show you how to call EWS using basic authentication.</span></span>  <br/> | <span data-ttu-id="b4dea-160">アプリケーションでユーザーの資格情報を収集して保存することが必要。</span><span class="sxs-lookup"><span data-stu-id="b4dea-160">Requires your application to collect and store the user’s credentials.</span></span><br/><br/><span data-ttu-id="b4dea-161">すべてのユーザーが基本認証を使用するには、NTLM 認証を無効にする必要がある。</span><span class="sxs-lookup"><span data-stu-id="b4dea-161">You have to turn off NTLM authentication for all users to use basic authentication.</span></span><br/><br/><span data-ttu-id="b4dea-162">アプリケーションでセキュリティ違反が発生した場合、攻撃者にユーザーのメール アドレスとパスワードが漏洩する可能性がある。</span><span class="sxs-lookup"><span data-stu-id="b4dea-162">If a security breach occurs in your application, it can expose the user’s email address and password to the attacker.</span></span>  <br/> |
   
<span data-ttu-id="b4dea-p112">基本認証が、ユーザーの組織と顧客のセキュリティ要件を満たしているかどうかを判断する必要があります。基本認証は、簡単なテストやデモ アプリケーションなどで、詳細なセットアップ タスクを行わないようにする場合に、最適な選択肢になることがあります。</span><span class="sxs-lookup"><span data-stu-id="b4dea-p112">You need to decide if basic authentication meets the security requirements of your organization and customers. Basic authentication can be the right choice if you want to avoid extensive setup tasks, for example for simple test or demonstration applications.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="b4dea-165">関連項目</span><span class="sxs-lookup"><span data-stu-id="b4dea-165">See also</span></span>

- [<span data-ttu-id="b4dea-166">Exchange で Web サービスの使用を開始する</span><span class="sxs-lookup"><span data-stu-id="b4dea-166">Start using web services in Exchange</span></span>](start-using-web-services-in-exchange.md)   
- [<span data-ttu-id="b4dea-167">Microsoft Azure AD を使用して Web アプリケーションへのサインオンを追加する</span><span class="sxs-lookup"><span data-stu-id="b4dea-167">Adding Sign-On to Your Web Application Using Microsoft Azure AD</span></span>](http://msdn.microsoft.com/library/055e1155-2d4d-4c85-b44e-d406872ba595%28Office.15%29.aspx)    
- [<span data-ttu-id="b4dea-168">Exchange で EWS へのアクセスを制御する</span><span class="sxs-lookup"><span data-stu-id="b4dea-168">How to: Control access to EWS in Exchange</span></span>](how-to-control-access-to-ews-in-exchange.md)    
- [<span data-ttu-id="b4dea-169">Exchange で EWS へのクライアント アプリケーションのアクセスを制御する</span><span class="sxs-lookup"><span data-stu-id="b4dea-169">Controlling client application access to EWS in Exchange</span></span>](controlling-client-application-access-to-ews-in-exchange.md)    
- [<span data-ttu-id="b4dea-170">サポートされているトークンとクレームの種類</span><span class="sxs-lookup"><span data-stu-id="b4dea-170">Supported Token and Claim Types</span></span>](http://msdn.microsoft.com/library/9d35e4bc-7b72-49d1-b723-5464eee6be2c%28Office.15%29.aspx)
    

