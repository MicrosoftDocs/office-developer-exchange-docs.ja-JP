---
title: 自動検出を使用して構成情報を更新します。
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: c2f3c6a5-e8ea-4375-b41a-686a6f238d33
description: 自動検出を使用して、Exchange 接続の構成情報をいつまたどのように更新するかについて説明します。
ms.openlocfilehash: ef3b61781cbafa6e7b873336a050c0b8c33a28ec
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2018
ms.locfileid: "19759070"
---
# <a name="refresh-configuration-information-by-using-autodiscover"></a><span data-ttu-id="1f676-103">自動検出を使用して構成情報を更新します。</span><span class="sxs-lookup"><span data-stu-id="1f676-103">Refresh configuration information by using Autodiscover</span></span>

<span data-ttu-id="1f676-104">自動検出を使用して、Exchange 接続の構成情報をいつまたどのように更新するかについて説明します。</span><span class="sxs-lookup"><span data-stu-id="1f676-104">Learn how and when to refresh configuration information for your Exchange connection by using Autodiscover.</span></span>
  
<span data-ttu-id="1f676-p101">EWS アプリケーションを初めて実行するとき、自動検出は、ユーザーの Exchange メールボックスに接続するために必要な情報を収集する優れた方法です。しかし、自動検出は初めての使用だけに適しているわけではありません。定期的に自動検出を使用することで、アプリケーションを Exchange 展開の変化に対応させ、接続状態を保持することができます。</span><span class="sxs-lookup"><span data-stu-id="1f676-p101">When your EWS application runs for the first time, Autodiscover provides a great way for you to collect the information you need in order to connect to your user's Exchange mailbox. But Autodiscover isn't just for first time use. Using Autodiscover on a regular basis can help keep your application connected by enabling it to respond to changes in the Exchange deployment.</span></span>
  
## <a name="cache-autodiscover-endpoint-and-ews-settings"></a><span data-ttu-id="1f676-108">自動検出エンドポイントおよび EWS 設定のキャッシュ</span><span class="sxs-lookup"><span data-stu-id="1f676-108">Cache Autodiscover endpoint and EWS settings</span></span>
<span data-ttu-id="1f676-109"><a name="bk_CacheSettings"> </a></span><span class="sxs-lookup"><span data-stu-id="1f676-109"></span></span>

<span data-ttu-id="1f676-p102">自動検出を定期的に使用することをお勧めしますが、これを行うには考慮すべき事項があります。環境の変化に対する迅速な対応と、数多く生成される不要なネットワーク トラフィックとのバランスをとるのが理想的です。アプリケーションが初めて自動検出応答に成功した場合、EWS 要求を送信するたびに自動検出プロセスを繰り返さなくてもいいように、次の情報を保存してください。</span><span class="sxs-lookup"><span data-stu-id="1f676-p102">While we recommend that you use Autodiscover regularly, how regularly you use it requires some consideration. Ideally you can balance responding quickly to changes in the environment against generating too much unnecessary network traffic. When your application gets a successful Autodiscover response for the first time, you should save the following information so that you do not have to repeat the Autodiscover process every time you send an EWS request.</span></span>
  
<span data-ttu-id="1f676-113">**表 1 です。自動検出要求をキャッシュするための情報**</span><span class="sxs-lookup"><span data-stu-id="1f676-113">**Table 1. Information to cache for Autodiscover requests**</span></span>

|<span data-ttu-id="1f676-114">**キャッシュを設定します。**</span><span class="sxs-lookup"><span data-stu-id="1f676-114">**Setting to cache**</span></span>|<span data-ttu-id="1f676-115">**に対して無効です。**</span><span class="sxs-lookup"><span data-stu-id="1f676-115">**Valid for…**</span></span>|<span data-ttu-id="1f676-116">**詳細情報**</span><span class="sxs-lookup"><span data-stu-id="1f676-116">**Details**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="1f676-117">自動検出エンドポイント</span><span class="sxs-lookup"><span data-stu-id="1f676-117">Autodiscover endpoint</span></span>  <br/> |<span data-ttu-id="1f676-118">動作中</span><span class="sxs-lookup"><span data-stu-id="1f676-118">As long as it works</span></span>  <br/> |<span data-ttu-id="1f676-119">正常な応答が返されますが、自動検出エンドポイントを保存すると、[自動検出エンドポイントの一覧を生成して](how-to-generate-a-list-of-autodiscover-endpoints.md)、正常な応答を取得するまでにしようとしてのプロセスを繰り返す必要はありません。</span><span class="sxs-lookup"><span data-stu-id="1f676-119">When you save the Autodiscover endpoint that returned a successful response, you do not have to repeat the process of [generating a list of Autodiscover endpoints](how-to-generate-a-list-of-autodiscover-endpoints.md) and trying them until you get a successful response.</span></span><br/><br/> <span data-ttu-id="1f676-120">**注**:「EWS のマネージ API が自動検出エンドポイント キャッシュをサポートしていますいません。</span><span class="sxs-lookup"><span data-stu-id="1f676-120">**NOTE**: The EWS Managed API does not support caching the Autodiscover endpoint.</span></span>           |
|<span data-ttu-id="1f676-121">EWS URL および自動検出応答から取得したその他の設定</span><span class="sxs-lookup"><span data-stu-id="1f676-121">EWS URL and any other settings retrieved from the Autodiscover response</span></span>  <br/> |<span data-ttu-id="1f676-122">24 時間</span><span class="sxs-lookup"><span data-stu-id="1f676-122">24 hours</span></span>  <br/> |<span data-ttu-id="1f676-123">EWS の URL とその他を保存することによって関連の EWS 要求ごとに[新しい自動検出要求の送信](how-to-get-user-settings-from-exchange-by-using-autodiscover.md)をする必要がないか、アプリケーションが再起動するかどうかの設定をします。</span><span class="sxs-lookup"><span data-stu-id="1f676-123">By saving the EWS URL and other related settings, you do not have to [send a new Autodiscover request](how-to-get-user-settings-from-exchange-by-using-autodiscover.md) for each EWS request or if your application restarts.</span></span> <span data-ttu-id="1f676-124">ただし、EWS の URL は、ユーザーの動作する場合でもサーバーがあることがより最適です。</span><span class="sxs-lookup"><span data-stu-id="1f676-124">However, even if an EWS URL works for your user, a server might be available that is more optimal.</span></span><br/><br/> <span data-ttu-id="1f676-125">など、ユーザーのメールボックスは、EWS 端点を優先に、新しいメールボックス サーバーに移動しました可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1f676-125">For example, the user's mailbox might have moved to a new mailbox server, resulting in a new preferred EWS endpoint.</span></span> <span data-ttu-id="1f676-126">最後の自動検出の要求から 24 時間経過後、新しい自動検出要求を送信することによって、ユーザーの設定を更新することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1f676-126">We recommend that you refresh your user settings by sending a new Autodiscover request after 24 hours have passed since your last Autodiscover request.</span></span> <span data-ttu-id="1f676-127">この時間は、アプリケーションの要件を満たすように調整できます。</span><span class="sxs-lookup"><span data-stu-id="1f676-127">This time can be adjusted to meet the requirements of your application.</span></span>  <br/> |
   
## <a name="refresh-cached-configuration-information"></a><span data-ttu-id="1f676-128">キャッシュされた構成情報を更新する</span><span class="sxs-lookup"><span data-stu-id="1f676-128">Refresh cached configuration information</span></span>
<span data-ttu-id="1f676-129"><a name="bk_RefreshConfig"> </a></span><span class="sxs-lookup"><span data-stu-id="1f676-129"></span></span>

<span data-ttu-id="1f676-p105">情報をキャッシュしたので、今度はそのキャッシュを最新の状態に保つ方法について調べてみましょう。次の場合に、キャッシュされた情報を更新することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="1f676-p105">Now that you have the information cached, let's examine how you can keep that cache fresh. We recommend that you refresh your cached information when:</span></span>
  
- <span data-ttu-id="1f676-132">情報の有効期間の期限が切れている場合。</span><span class="sxs-lookup"><span data-stu-id="1f676-132">The information's validity period expires.</span></span>
    
- <span data-ttu-id="1f676-133">の[接続に関連するエラー](#bk_ConnectionErrors)が発生します。</span><span class="sxs-lookup"><span data-stu-id="1f676-133">A [Connection-related errors](#bk_ConnectionErrors) occurs.</span></span> 
    
<span data-ttu-id="1f676-134">キャッシュされた情報を更新するには、キャッシュされた自動検出エンドポイントに自動検出要求を送信し、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="1f676-134">To refresh your cached information, send an Autodiscover request to a cached Autodiscover endpoint, and do the following:</span></span>
  
- <span data-ttu-id="1f676-135">要求が成功したら、応答の EWS エンドポイントとキャッシュされた EWS エンドポイントを比較し、次の操作を行います。</span><span class="sxs-lookup"><span data-stu-id="1f676-135">If the request succeeds, compare the EWS endpoint in the response with the cached EWS endpoint, and do the following:</span></span>
    
  - <span data-ttu-id="1f676-p106">2 つのエンドポイントが異なる場合は、新しい EWS エンドポイントを使用します。エラーから回復するために更新する場合は、新しいエンドポイントを使用して失敗した要求を再試行してください。</span><span class="sxs-lookup"><span data-stu-id="1f676-p106">If they are different, use the new EWS endpoint. If you're refreshing to recover from an error, retry the failed request with the new endpoint.</span></span>
    
  - <span data-ttu-id="1f676-p107">2 つのエンドポイントが同じ場合は、元の EWS エンドポイントを引き続き使用します。エラーから回復するために更新する場合は、必要に応じてエラーを処理します。</span><span class="sxs-lookup"><span data-stu-id="1f676-p107">If they are the same, continue to use the original EWS endpoint. If you're refreshing to recover from an error, handle the error as appropriate.</span></span>
    
- <span data-ttu-id="1f676-140">要求が失敗した場合、[自動検出プロセス](autodiscover-for-exchange.md)を最初から開始します。</span><span class="sxs-lookup"><span data-stu-id="1f676-140">If the request fails, start the [Autodiscover process](autodiscover-for-exchange.md) from the beginning.</span></span> <span data-ttu-id="1f676-141">正常な応答を取得した後は、自動検出エンドポイントが成功し、新しい EWS エンドポイントを使用する続行すると自動検出エンドポイントのキャッシュを交換してください。</span><span class="sxs-lookup"><span data-stu-id="1f676-141">After you get a successful response, replace the cached Autodiscover endpoint with the Autodiscover endpoint that succeeded and continue to use the new EWS endpoint.</span></span> <span data-ttu-id="1f676-142">正常な応答が得られなかった場合は、引き続き元の自動検出エンドポイントとエンドポイントの EWS を使用します。</span><span class="sxs-lookup"><span data-stu-id="1f676-142">If you do not get a successful response, continue to use the original Autodiscover endpoint and EWS endpoint.</span></span> <span data-ttu-id="1f676-143">エラーから回復するのには更新する場合は、必要に応じてエラーを処理します。</span><span class="sxs-lookup"><span data-stu-id="1f676-143">If you're refreshing to recover from an error, handle the error as appropriate.</span></span> 
    
<span data-ttu-id="1f676-144">次の図は、このプロセスを視覚的に表したものです。</span><span class="sxs-lookup"><span data-stu-id="1f676-144">The following figure provides a visual representation of this process.</span></span>
  
<span data-ttu-id="1f676-145">**図 1 です。自動検出を使用して構成情報を更新するためのプロセス**</span><span class="sxs-lookup"><span data-stu-id="1f676-145">**Figure 1. Process for refreshing configuration information by using Autodiscover**</span></span>

![模式図は自動検出が構成情報を更新する方法を示しています。](media/Ex15_Autodiscover_Refresh_Flowchart.png)
  
### <a name="connection-related-errors"></a><span data-ttu-id="1f676-147">接続に関連するエラー</span><span class="sxs-lookup"><span data-stu-id="1f676-147">Connection-related errors</span></span>
<span data-ttu-id="1f676-148"><a name="bk_ConnectionErrors"> </a></span><span class="sxs-lookup"><span data-stu-id="1f676-148"></span></span>

<span data-ttu-id="1f676-149">キャッシュされた構成情報を更新すると、すべてではありませんが、一部のエラーを解決することができます。 </span><span class="sxs-lookup"><span data-stu-id="1f676-149">Refreshing your cached configuration information can help with some errors, but not all.</span></span> 
  
<span data-ttu-id="1f676-150">**表 2 になります。エラーが、キャッシュを更新することで解決**</span><span class="sxs-lookup"><span data-stu-id="1f676-150">**Table 2. Errors addressed by refreshing your cache**</span></span>

|<span data-ttu-id="1f676-151">**Error**</span><span class="sxs-lookup"><span data-stu-id="1f676-151">**Error**</span></span>|<span data-ttu-id="1f676-152">**EWS のマネージ API の実装**</span><span class="sxs-lookup"><span data-stu-id="1f676-152">**EWS Managed API implementation**</span></span>|<span data-ttu-id="1f676-153">**メモ**</span><span class="sxs-lookup"><span data-stu-id="1f676-153">**Notes**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="1f676-154">DNS またはネットワークのエラー</span><span class="sxs-lookup"><span data-stu-id="1f676-154">DNS or network failure errors</span></span><br/><br/> <span data-ttu-id="1f676-155">例: ホスト名が見つかりませんでした。</span><span class="sxs-lookup"><span data-stu-id="1f676-155">Example: Host name could not be found.</span></span>  <br/> |[<span data-ttu-id="1f676-156">ServiceRemoteException</span><span class="sxs-lookup"><span data-stu-id="1f676-156">ServiceRemoteException</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ServiceRemoteException.aspx) <br/> |<span data-ttu-id="1f676-157">自動検出を試みることによって、サーバーが見つかりませんでしたか、到達できませんでしたを示す、エラーを解決する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="1f676-157">Any error that indicates that the server could not be found or could not be reached might be resolved by trying Autodiscover.</span></span> <br/><br/> <span data-ttu-id="1f676-158">EWS エンドポイントのキャッシュが有効な場合は、不要になった場合があり、自動検出できる新しいサーバーをポイントすることがあります。</span><span class="sxs-lookup"><span data-stu-id="1f676-158">Your cached EWS endpoint might no longer be valid, and Autodiscover might be able to point you to the new server.</span></span>  <br/> |
|<span data-ttu-id="1f676-159">HTTP 状態のエラー</span><span class="sxs-lookup"><span data-stu-id="1f676-159">HTTP status errors</span></span><br/><br/> <span data-ttu-id="1f676-160">例: 503 サービスを利用できません。</span><span class="sxs-lookup"><span data-stu-id="1f676-160">Example: 503 Service Unavailable</span></span>  <br/> |[<span data-ttu-id="1f676-161">ServiceRemoteException</span><span class="sxs-lookup"><span data-stu-id="1f676-161">ServiceRemoteException</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ServiceRemoteException.aspx) <br/> |<span data-ttu-id="1f676-162">HTTP ステータス エラーは、さまざまな理由で発生します。</span><span class="sxs-lookup"><span data-stu-id="1f676-162">HTTP status errors can happen for many different reasons.</span></span><br/><br/> <span data-ttu-id="1f676-163">ただしは、新しい EWS エンドポイントが、ユーザーが利用できるかどうかを自動検出を実行することをお勧めです。</span><span class="sxs-lookup"><span data-stu-id="1f676-163">However, it's a good idea to try Autodiscover to see if a new EWS endpoint is available for the user.</span></span>  <br/> |
|<span data-ttu-id="1f676-164">EWS エラー コード</span><span class="sxs-lookup"><span data-stu-id="1f676-164">EWS error codes</span></span> <br/><br/> <span data-ttu-id="1f676-165">例: ErrorConnectionFailed</span><span class="sxs-lookup"><span data-stu-id="1f676-165">Example: ErrorConnectionFailed</span></span> <br/> |[<span data-ttu-id="1f676-166">ResponseCodeType</span><span class="sxs-lookup"><span data-stu-id="1f676-166">ResponseCodeType</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.WebServices.Data.ResponseCodeType.aspx) <br/> | <span data-ttu-id="1f676-167">EWS エラー コードのほとんどは保証するもので、構成情報を更新します。</span><span class="sxs-lookup"><span data-stu-id="1f676-167">Most EWS error codes don't warrant refreshing your configuration information.</span></span><br/><br/> <span data-ttu-id="1f676-168">ただし、次を具体的に指定の構成情報を更新する必要があること。</span><span class="sxs-lookup"><span data-stu-id="1f676-168">However, the following specifically indicate that the configuration information needs to be updated:</span></span><br/><span data-ttu-id="1f676-169">- **ErrorConnectionFailed**</span><span class="sxs-lookup"><span data-stu-id="1f676-169">- **ErrorConnectionFailed**</span></span> <br/><span data-ttu-id="1f676-170">- **ErrorMailboxMoveInProgress**</span><span class="sxs-lookup"><span data-stu-id="1f676-170">- **ErrorMailboxMoveInProgress**</span></span> <br/> |
   
## <a name="see-also"></a><span data-ttu-id="1f676-171">関連項目</span><span class="sxs-lookup"><span data-stu-id="1f676-171">See also</span></span>

- [<span data-ttu-id="1f676-172">Exchange の自動検出</span><span class="sxs-lookup"><span data-stu-id="1f676-172">Autodiscover for Exchange</span></span>](autodiscover-for-exchange.md)  
- [<span data-ttu-id="1f676-173">自動検出エンドポイントの一覧を生成します。</span><span class="sxs-lookup"><span data-stu-id="1f676-173">Generate a list of Autodiscover endpoints</span></span>](how-to-generate-a-list-of-autodiscover-endpoints.md)   
- [<span data-ttu-id="1f676-174">Exchange から自動検出を使用してユーザー設定を取得します。</span><span class="sxs-lookup"><span data-stu-id="1f676-174">Get user settings from Exchange by using Autodiscover</span></span>](how-to-get-user-settings-from-exchange-by-using-autodiscover.md)
    

