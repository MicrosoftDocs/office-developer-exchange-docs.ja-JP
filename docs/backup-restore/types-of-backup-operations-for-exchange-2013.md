---
title: Exchange 2013 のバックアップ操作の種類
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 70510902-9583-4177-be3d-afbf757a1ec0
description: Exchange 2013 ストア データベースで実行できるバックアップの種類 (完全バックアップ、コピー バックアップ、増分バックアップ、差分バックアップ) について説明します。
ms.openlocfilehash: dd07226acb3a3bb055e98f861a5c01375ee50dda
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2020
ms.locfileid: "44456293"
---
# <a name="types-of-backup-operations-for-exchange-2013"></a><span data-ttu-id="daf87-103">Exchange 2013 のバックアップ操作の種類</span><span class="sxs-lookup"><span data-stu-id="daf87-103">Types of backup operations for Exchange 2013</span></span>

<span data-ttu-id="daf87-104">Exchange 2013 ストア データベースで実行できるバックアップの種類 (完全バックアップ、コピー バックアップ、増分バックアップ、差分バックアップ) について説明します。</span><span class="sxs-lookup"><span data-stu-id="daf87-104">Find information about the different types of backups you can perform on your Exchange 2013 store databases, including full, copy, incremental, and differential backups.</span></span>
  
<span data-ttu-id="daf87-105">**製品:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="daf87-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="daf87-106">この記事では、Exchange Server 2013 データベースで実行できるさまざまな種類のバックアップについての情報と、それらのバックアップがデータベースファイルに与える影響について説明します。</span><span class="sxs-lookup"><span data-stu-id="daf87-106">This article provides information about the different types of backups you can perform on Exchange Server 2013 databases, and how those backups affect the database files.</span></span> 
  
<span data-ttu-id="daf87-107">ボリューム シャドウ コピー サービス (VSS) と Exchange ライターを使用するバックアップと復元アプリケーションでは、次の表に示す種類のバックアップを実行できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-107">Backup and restore applications that use the Volume Shadow Copy Service (VSS) and the Exchange writer can perform the types of backups listed in the following table.</span></span>
  
<span data-ttu-id="daf87-108">**表 1.バックアップ操作の種類**</span><span class="sxs-lookup"><span data-stu-id="daf87-108">**Table 1. Types of backup operations**</span></span>

|<span data-ttu-id="daf87-109">**バックアップの種類**</span><span class="sxs-lookup"><span data-stu-id="daf87-109">**Backup type**</span></span>|<span data-ttu-id="daf87-110">**説明**</span><span class="sxs-lookup"><span data-stu-id="daf87-110">**Description**</span></span>|
|:-----|:-----|
|[<span data-ttu-id="daf87-111">完全バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-111">Full backups</span></span>](types-of-backup-operations-for-exchange-2013.md#bk_FullBackups) <br/> |<span data-ttu-id="daf87-112">データベース (.edb)、 \* トランザクションログ ( \* .log)、チェックポイントファイル (.chk) をバックアップ \* し、特定のデータベースのトランザクションログを切り詰めます。</span><span class="sxs-lookup"><span data-stu-id="daf87-112">Backs up the databases (\*.edb), transaction logs (\*.log), checkpoint files (\*.chk), and then truncates the transaction logs for a specific database.</span></span>  <br/> |
|[<span data-ttu-id="daf87-113">コピー バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-113">Copy backups</span></span>](types-of-backup-operations-for-exchange-2013.md#bk_CopyBackups) <br/> |<span data-ttu-id="daf87-114">データベース、トランザクション ログ、およびチェックポイント ファイルをバックアップします。</span><span class="sxs-lookup"><span data-stu-id="daf87-114">Backs up the database, transaction logs, and checkpoint files.</span></span> <span data-ttu-id="daf87-115">コピー バックアップでは、データベースのトランザクション ログは切り詰められません。</span><span class="sxs-lookup"><span data-stu-id="daf87-115">Copy backups do not truncate the transaction logs for the database.</span></span>  <br/> |
|[<span data-ttu-id="daf87-116">増分バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-116">Incremental backups</span></span>](types-of-backup-operations-for-exchange-2013.md#bk_IncrementalBackups) <br/> |<span data-ttu-id="daf87-117">最後の完全バックアップまたは増分バックアップ以降に行われた変更を記録するトランザクション ログをバックアップして、トランザクション ログを切り詰めます。</span><span class="sxs-lookup"><span data-stu-id="daf87-117">Backs up the transaction logs to record changes since the last full or incremental backup, and then truncates the transaction logs.</span></span>  <br/> |
|[<span data-ttu-id="daf87-118">差分バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-118">Differential backups</span></span>](types-of-backup-operations-for-exchange-2013.md#bk_DifferentialBackups) <br/> |<span data-ttu-id="daf87-119">最後の完全バックアップまたは増分バックアップ以降に行われた変更を記録するトランザクション ログをバックアップしますが、トランザクション ログは切り詰めません。</span><span class="sxs-lookup"><span data-stu-id="daf87-119">Backs up the transaction logs to record changes since the last full or incremental backup, and does not truncate the transaction logs.</span></span>  <br/> |
   
<span data-ttu-id="daf87-120">Exchange ライターによって定義されたコンポーネント、またはデータベースファイルは、Exchange 2013 データベース内のデータベースファイルとトランザクションログを表します。</span><span class="sxs-lookup"><span data-stu-id="daf87-120">The components, or database files, defined by the Exchange writer represent the database files and transaction logs within Exchange 2013 databases.</span></span> <span data-ttu-id="daf87-121">これにより、バックアップおよび復元アプリケーションで、バックアップ操作中に Exchange 2013 データベース内のコンポーネントの名前を表示することができます。</span><span class="sxs-lookup"><span data-stu-id="daf87-121">This allows your backup and restore application to display the names of the components within an Exchange 2013 database during backup operations.</span></span> <span data-ttu-id="daf87-122">ただし、バックアップアプリケーションは個別のデータベースコンポーネントをバックアップできません。データベース全体をバックアップできます。</span><span class="sxs-lookup"><span data-stu-id="daf87-122">Your backup application cannot back up individual database components, however; it can only back up whole databases.</span></span> 
  
<span data-ttu-id="daf87-p103">Exchange ライターは、データベース コンポーネントの論理パスを標準化します。このパスは Exchange ライターのメタデータで指定されています。必要に応じて、Exchange ライターはバックアップと復元のアプリケーションに論理パスを返します。</span><span class="sxs-lookup"><span data-stu-id="daf87-p103">The Exchange writer standardizes the database component logical paths, which are specified in the Exchange writer metadata. The Exchange writer returns the logical paths to your backup and restore application as needed.</span></span>
  
<span data-ttu-id="daf87-125">Exchange ライターは、論理パスを次の形式で提供します。</span><span class="sxs-lookup"><span data-stu-id="daf87-125">The Exchange writer provides logical paths in the form:</span></span> 
  
 `logicalPath = "Exchange Server\Microsoft Information Store\<Server name>"`
  
<span data-ttu-id="daf87-p104">サーバー コンポーネントとデータベース コンポーネントはファイル グループのコンポーネントですが、関連ファイルはありません。これらには、個々のファイルを指定するサブコンポーネントがあります。データベースには、Logs という名前のログ コンポーネントが 1 つだけ含まれています。個々のデータベース コンポーネントのコンポーネント名は、文字列で表示されるデータベースの GUID です。 </span><span class="sxs-lookup"><span data-stu-id="daf87-p104">The server and database components are file group components, but they do not have any associated files. They have subcomponents that specify the individual files. A database contains only one log component, named Logs. The component names of the individual database components are the GUIDs of the databases, shown as strings.</span></span> 
  
<span data-ttu-id="daf87-130">Exchange ライターには、VSS フレームワークのガイドラインに基づいてバックアップできるデータベースのみが一覧表示されます。</span><span class="sxs-lookup"><span data-stu-id="daf87-130">The Exchange writer only lists databases that can be backed up, based on VSS framework guidelines.</span></span> <span data-ttu-id="daf87-131">Exchange 2013 回復用データベースとしてマウントされているデータベース、およびマウントされていないデータベースはバックアップできないため、Exchange ライターのメタデータにリストされていません。</span><span class="sxs-lookup"><span data-stu-id="daf87-131">Databases that are mounted as the Exchange 2013 recovery database, as well as databases that are not mounted, cannot be backed up, and therefore are not listed in the Exchange writer's metadata.</span></span>
  
<span data-ttu-id="daf87-132">次の図に、Exchange ライターのバックアップ プロセスを示します。</span><span class="sxs-lookup"><span data-stu-id="daf87-132">The following figure shows the Exchange writer backup process.</span></span> 
  
<span data-ttu-id="daf87-133">**図 1バックアップ プロセスのイベントのシーケンス**</span><span class="sxs-lookup"><span data-stu-id="daf87-133">**Figure 1. Sequence of events for the backup process**</span></span>

![バックアップ プロセスのイベント シーケンスを示す図。シーケンスは、Exchange ストアの起動から始まり、Exchange ライター、VSS、およびクライアント アプリケーションの間での多くのステップが続きます。](media/VSS_StoreWriterBackup.gif)
  
## <a name="full-backups"></a><span data-ttu-id="daf87-136">完全バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-136">Full backups</span></span>
<span data-ttu-id="daf87-137"><a name="bk_FullBackups"> </a></span><span class="sxs-lookup"><span data-stu-id="daf87-137"><a name="bk_FullBackups"> </a></span></span>

<span data-ttu-id="daf87-138">Exchange データベースの完全バックアップでは、データベース ファイル、トランザクション ログ、およびチェックポイント ファイルのコピーを作成して格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="daf87-138">A full backup of an Exchange database involves creating and storing a copy of the database file, transaction logs, and checkpoint files.</span></span> <span data-ttu-id="daf87-139">Exchange 2013 データベースには、専用のトランザクションログファイルのセットが1つあります。</span><span class="sxs-lookup"><span data-stu-id="daf87-139">An Exchange 2013 database has one set of dedicated transaction log files.</span></span>
  
<span data-ttu-id="daf87-p108">データベースのバックアップが終了した後に、ディスク上のトランザクション ログ ファイルが切り詰められます。これで、バックアップ後に実行したデータベースの変更のみが維持されるようになります。このプロセスの間、Exchange ライターは、データベースが直近のチェックポイントまでのすべての変更を含んだ整合状態で現在バックアップされている、という前提に基づいて、チェックポイントまですべてのログ エントリを削除します。 </span><span class="sxs-lookup"><span data-stu-id="daf87-p108">After the database has been backed up, the transaction log files on the disk are truncated so that only database changes that occurred after the backup was made will remain. During this process, the Exchange writer deletes all log entries up to the checkpoint, based on the assumption that the databases have now been backed up in a consistent state that contains all changes up to the most recent checkpoint.</span></span> 
  
<span data-ttu-id="daf87-142">バックアップ操作中にバックアップ対象のデータベースがマウント解除されている場合、Exchange 2013 はトランザクションログを切り捨てません。結果は、完全なバックアップ操作ではなくコピーバックアップ操作と同じになります。</span><span class="sxs-lookup"><span data-stu-id="daf87-142">If the database being backed up is dismounted during the backup operation, Exchange 2013 will not truncate the transaction logs and the result will be the equivalent of a copy backup operation, not a full backup operation.</span></span> 
  
<span data-ttu-id="daf87-p109">完全バックアップが完了すると、マウントされているアクティブなデータベースのヘッダーが、現在のバックアップ情報を使用して更新されます。レプリケートされた展開では、この情報はトランザクション ログ ファイルにコミットされ、データベースの別の DAG のコピーにレプリケートされます。データベース コピーのヘッダーは、このトランザクション ログ ファイルがデータベース コピーで再生されるように更新されます。</span><span class="sxs-lookup"><span data-stu-id="daf87-p109">When a full backup is completed, the headers of the active mounted database are updated with the current backup information. In replicated deployments, this information will be committed to a transaction log file and replicated to the other DAG copies of the database. Headers of the database copies are updated as this transaction log file is replayed into the database copy.</span></span>
  
<span data-ttu-id="daf87-p110">完全シャドウ コピー バックアップは、増分シャドウ コピー バックアップまたは差分シャドウ コピー バックアップを実行するために必要です。完全バックアップは、任意のコピー (シャドウ コピー バックアップに限る) から取得できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-p110">A full shadow copy backup is required in order to run incremental or differential shadow copy backups. The full backups can be taken from any copy as long as it is a shadow copy backup.</span></span>
  
<span data-ttu-id="daf87-148">完全バックアップは、次に示すシナリオで使用できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-148">Full backups are used in the following scenarios:</span></span>
  
- <span data-ttu-id="daf87-p111">データベースが破損または消失したが、ディスク上のトランザクション ログ ファイルはそのまま残っている。このシナリオでは、影響を受けるデータベース ファイルを完全バックアップから復元し、ディスク上に残っているトランザクション ログを再生することにより回復します。 </span><span class="sxs-lookup"><span data-stu-id="daf87-p111">A database becomes corrupted or is lost, but the transaction log files on disk are intact. In this scenario, the affected database files can be restored from the full backup, and then recovered by replaying the transaction logs that are still on disk.</span></span> 
    
- <span data-ttu-id="daf87-p112">ディスク上のデータベース ファイルとトランザクション ログ ファイルが消失している。このシナリオでは、完全バックアップの際にバックアップされたトランザクション ログ ファイルがデータベースと共に復元されます。</span><span class="sxs-lookup"><span data-stu-id="daf87-p112">Transaction log files, as well as the database file on disk, are lost. In this scenario, the transaction log files that were backed up at the time of the full backup are restored together with the database.</span></span>
    
<span data-ttu-id="daf87-153">Exchange 2013 では、完全バックアップセットから該当するデータベースを復元しなくても、ログを復元できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-153">In Exchange 2013, logs can be restored without having to restore the applicable database from a full backup set.</span></span> <span data-ttu-id="daf87-154">このオプションは、以前の完全バックアップを復元し、最新の完全バックアップからのトランザクション ログ ファイルを結合して、ロール フォワードを可能にします。</span><span class="sxs-lookup"><span data-stu-id="daf87-154">This option makes it possible for a previous full backup to be restored and combined with the transaction log files from the most recent full backup to roll forward.</span></span>
  
<span data-ttu-id="daf87-155">Exchange ライターがバックアップを実行するときに VSS の[VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙が**VSS_BT_FULL**に設定されている場合は、次のコンポーネントがバックアップに含まれます。</span><span class="sxs-lookup"><span data-stu-id="daf87-155">When the [VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx) enumeration in VSS is set to **VSS_BT_FULL** when the Exchange writer performs a backup, the following components are included in the backup:</span></span> 
  
- <span data-ttu-id="daf87-156">論理パスが指定されたデータベース \\ サーバー名 \> \\<データベース GUID<サーバー名\></span><span class="sxs-lookup"><span data-stu-id="daf87-156">A database with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span> 
    
- <span data-ttu-id="daf87-157">論理パスが含まれているログファイル。 Exchange サーバー名 Microsoft Information Store \\<サーバー名 \> \\<データベース GUID\></span><span class="sxs-lookup"><span data-stu-id="daf87-157">A log file with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span> 
    
## <a name="copy-backups"></a><span data-ttu-id="daf87-158">コピー バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-158">Copy backups</span></span>
<span data-ttu-id="daf87-159"><a name="bk_CopyBackups"> </a></span><span class="sxs-lookup"><span data-stu-id="daf87-159"><a name="bk_CopyBackups"> </a></span></span>

<span data-ttu-id="daf87-p114">Exchange データベースのコピー バックアップでは、完全バックアップに含まれる要素と同じ要素を作成して格納する必要があります。ただし、完全バックアップとは異なり、ディスク上のトランザクション ログ ファイルはバックアップが完了しても切り詰められません。コピー バックアップは、データ復旧を目的としたものではありません。その代わりに、コピーバックアップでは、テストや問題の診断、レプリカのシード処理に使用するデータのイメージを提供します。</span><span class="sxs-lookup"><span data-stu-id="daf87-p114">A copy backup of an Exchange database involves creating and storing the same elements that are included in a full backup. However, unlike with a full backup, the transaction log files on disk are not truncated when the backup is complete. Copy backups are not intended for data recovery purposes. Instead, copy backups provide an image of the data for use in testing, problem diagnosis, or for seeding a replica.</span></span>
  
<span data-ttu-id="daf87-164">たとえば、exchange ストアに問題が発生している Exchange 2013 管理者は、運用システムに影響を与えることなく、テスト環境で使用するコピーバックアップを作成できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-164">For example, an Exchange 2013 administrator who is experiencing problems with the Exchange store can make a copy backup for use in a test environment without affecting the production system.</span></span> <span data-ttu-id="daf87-165">コピーバックアップは、定期的なバックアップスケジュールに影響しません。ただし、コピーバックアップでは、Exchange ストアが進行中のバックアップ状態になるため、コピーバックアップが完了するか中止されるまで、他のスケジュールされたバックアップを実行しないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="daf87-165">Copy backups do not affect regular backup schedules; however, because a copy backup also puts the Exchange store in a backup-in-progress state, it blocks other scheduled backups from proceeding until the copy backup is completed or aborted.</span></span> 
  
<span data-ttu-id="daf87-166">VSS の[VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙が**VSS_BT_COPY**に設定されている場合は、次のコンポーネントがコピーバックアップに含まれます。</span><span class="sxs-lookup"><span data-stu-id="daf87-166">When the [VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx) enumeration in VSS is set to **VSS_BT_COPY**, the following components are included in a copy backup:</span></span> 
  
- <span data-ttu-id="daf87-167">論理パスが指定されたデータベース \\ サーバー名 \> \\<データベース GUID<サーバー名\></span><span class="sxs-lookup"><span data-stu-id="daf87-167">A database with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span> 
    
- <span data-ttu-id="daf87-168">論理パスが含まれているログファイルコンポーネント Exchange \\ サーバー名<サーバー名 \> \\<データベース GUID\></span><span class="sxs-lookup"><span data-stu-id="daf87-168">A log file component with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span>
    
## <a name="incremental-backups"></a><span data-ttu-id="daf87-169">増分バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-169">Incremental backups</span></span>
<span data-ttu-id="daf87-170"><a name="bk_IncrementalBackups"> </a></span><span class="sxs-lookup"><span data-stu-id="daf87-170"><a name="bk_IncrementalBackups"> </a></span></span>

<span data-ttu-id="daf87-171">Exchange 2013 データベースの増分バックアップは、前回の完全バックアップまたは増分バックアップ以降に発生したデータベースへの変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="daf87-171">An incremental backup of an Exchange 2013 database saves changes to the database that have occurred since the last full or incremental backup.</span></span> <span data-ttu-id="daf87-172">すべてのデータベース ファイルとログ ファイルがシステムに復元されると、前回の増分バックアップの時点の状態に回復できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-172">When all the database files and log files are restored to the system, they can be recovered to the state they were in at the time of the last incremental backup.</span></span> <span data-ttu-id="daf87-173">増分バックアップに格納されているデータには、現在の時刻までのトランザクション ログ ファイルのみが含まれています。</span><span class="sxs-lookup"><span data-stu-id="daf87-173">The data stored in an incremental backup includes only the transaction log files up to the current time.</span></span> 
  
<span data-ttu-id="daf87-p117">バックアップが完了すると、Exchange サーバーはログ ファイルを切り詰め、データベース ヘッダー内にあるバックアップの時間をマークします。増分バックアップを使用してデータベースを回復するには、復元されるデータ セットが少なくとも 2 つ (直前の完全バックアップと、その後のすべての増分バックアップ) 必要です。増分バックアップの使用には、個々のバックアップが完全バックアップよりはるかに小さいことや、個々の増分バックアップが差分バックアップより小さくなることが多いという利点があります。 </span><span class="sxs-lookup"><span data-stu-id="daf87-p117">When the backup is complete, the Exchange server truncates the log files and marks the backup time in the database headers. Using an incremental backup to recover a database requires at least two data sets to be restored: the last full backup, and then every incremental backup taken after the last full backup. The advantage to using incremental backups is that the individual backups are much smaller than a full backup and individual incremental backups are frequently smaller than differential backups.</span></span> 
  
<span data-ttu-id="daf87-p118">増分バックアップの使用には、完全バックアップと完全バックアップの間に何度も増分バックアップを行うと、Exchange ストアの回復によって多くの増分バックアップを引き起こす可能性があるという欠点もあります。Exchange では、増分の変更の開始点を確立するための、以前の完全バックアップがない場合、増分バックアップを実行できません。 </span><span class="sxs-lookup"><span data-stu-id="daf87-p118">The disadvantage to using incremental backups is that if many incremental backups were made between full backups, recovering the Exchange store may involve recovering many incremental backups. Exchange does not allow an incremental backup to occur when no previous full backup exists to establish the starting point for the incremental changes.</span></span> 
  
<span data-ttu-id="daf87-179">DAG コピーの場所から取得した完全バックアップの後に、アクティブな場所からの増分バックアップとその逆を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="daf87-179">A full backup taken from a DAG copy location can be followed by an incremental backup from the active location and vice versa.</span></span> <span data-ttu-id="daf87-180">最後のバックアップ状態がアクティブデータベースのヘッダーに保持され、データベースヘッダーに対する変更が、DAG 展開の他のすべてのトランザクションログと同様に、コピーデータベースの場所でトランザクションログに書き込まれ、レプリケートされ、再生されるという制限があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="daf87-180">One restriction to keep in mind is that the last backup state is maintained in the active database's header, and the changes to the database header are written to transaction logs, replicated, and replayed at the copy database location just like all other transaction logs in DAG deployments.</span></span> <span data-ttu-id="daf87-181">バックアップと復元の相互運用性のため、バックアップアプリケーションは、特定の DAG ノードでのみバックアップを実行する機能を提供します。これには、ノードがアクティブであるかパッシブであるかにかかわらず、パッシブノードのみから、またはアクティブなノードからのみバックアップを実行することもできます。</span><span class="sxs-lookup"><span data-stu-id="daf87-181">Because backups and restores interoperate, backup applications can provide the functionality to run backups exclusively on a specific DAG node, regardless of whether the node is active or passive, as well as to run backups exclusively from the passive node or exclusively from the active node.</span></span>
  
<span data-ttu-id="daf87-182">VSS の[VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙が**VSS_BT_INCREMENTAL**に設定されている場合は、次のコンポーネントが増分バックアップに含まれます。</span><span class="sxs-lookup"><span data-stu-id="daf87-182">When the [VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx) enumeration in VSS is set to **VSS_BT_INCREMENTAL**, the following components are included in an incremental backup:</span></span> 
  
- <span data-ttu-id="daf87-183">論理パスが指定されたデータベース \\ サーバー名 \> \\<データベース GUID<サーバー名\></span><span class="sxs-lookup"><span data-stu-id="daf87-183">A database with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span> 
    
- <span data-ttu-id="daf87-184">論理パスが含まれているログファイル。 Exchange サーバー名 Microsoft Information Store \\<サーバー名 \> \\<データベース GUID\></span><span class="sxs-lookup"><span data-stu-id="daf87-184">A log file with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span>
    
## <a name="differential-backups"></a><span data-ttu-id="daf87-185">差分バックアップ</span><span class="sxs-lookup"><span data-stu-id="daf87-185">Differential backups</span></span>
<span data-ttu-id="daf87-186"><a name="bk_DifferentialBackups"> </a></span><span class="sxs-lookup"><span data-stu-id="daf87-186"><a name="bk_DifferentialBackups"> </a></span></span>

<span data-ttu-id="daf87-187">Exchange 2013 データベースの差分バックアップは、前回の完全バックアップまたは増分バックアップ以降に発生したデータベースへの変更を保存します。</span><span class="sxs-lookup"><span data-stu-id="daf87-187">A differential backup of an Exchange 2013 database saves changes to the database that have occurred since the last full or incremental backup.</span></span> <span data-ttu-id="daf87-188">データベース ファイルとログ ファイルがシステムによって復元されると、前回の差分バックアップの時点の状態に回復できます。</span><span class="sxs-lookup"><span data-stu-id="daf87-188">When the database files and log files are restored by the system, they can be recovered to the state they were in at the last differential backup.</span></span> 
  
<span data-ttu-id="daf87-p121">差分バックアップに格納されているデータには、現在のチェックポイントまでのトランザクション ログ ファイルのみが含まれています。差分バックアップでは、ログ ファイルを削除または変更しないでください。または、データベースのヘッダーを変更しないでください。データベースの回復に差分バックアップを使用する場合は、2 つのデータ セット (直前の完全バックアップと、その後に最新の差分バックアップ) のみを復元する必要があります。 </span><span class="sxs-lookup"><span data-stu-id="daf87-p121">The data stored in a differential backup includes only the transaction log files up to the current checkpoint. Differential backups do not delete or change the log files or change the database headers. To use a differential backup to recover a database, you only need to restore two data sets: the last full backup, and then the most recent differential backup.</span></span> 
  
<span data-ttu-id="daf87-p122">差分バックアップの使用には、完全バックアップが実行されるまで差分バックアップは各バックアップ内のバックアップされたデータを重複させる、という欠点があります。　完全バックアップと完全バックアップの間に何度も差分バックアップを行うと、必要な記憶域の量は、同じ回数の増分バックアップに必要な量を超える可能性があります。Exchange では、異なるバックアップの変更の開始点を確立するための完全バックアップまたは増分バックアップがない場合、差分バックアップを実行できません。</span><span class="sxs-lookup"><span data-stu-id="daf87-p122">The disadvantage to using differential backups is that the differential backups duplicate the backed up data in each backup until a full backup is performed. If many differential backups are taken between full backups, the storage space required can exceed that required by the same number of incremental backups. Exchange does not allow a differential backup to occur when there has not been a full or incremental backup to establish the starting point for differential backups.</span></span>
  
<span data-ttu-id="daf87-p123">コピーの場所から取得した完全バックアップに続いて、アクティブな場所とその逆の場所からの差分バックアップを実行できます。最後のバックアップの状態がアクティブなデータベースのヘッダーに維持されていること、データベースのヘッダーに対する変更がトランザクション ログに書き込まれ、レプリケートされ、DAG 展開の他のすべてのトランザクション ログと同様にコピー データベースの場所で再生されること、などの制限に留意してください。バックアップと復元は相互運用されるため、バックアップ アプリケーションでは特定の DAG ノード上で排他的にすべてのバックアップを実行する機能を提供します。これは、ノードがアクティブでもパッシブでも関係ありません。また、パッシブ ノードからの排他的なバックアップの実行でもアクティブ ノードからの排他的なバックアップの実行でも関係ありません。</span><span class="sxs-lookup"><span data-stu-id="daf87-p123">A full backup taken from the copy location can be followed by a differential backup from the active location and vice versa. One restriction to keep in mind is that the last backup state is maintained in the active database's header, and the changes to the database header are written to transaction logs, replicated, and replayed at the copy database location just like all other transaction logs in DAG deployments. Because backups and restores interoperate, backup applications provide the functionality to run all backups exclusively on a specific DAG node, regardless of whether the node is active or passive, as well as to run backups exclusively from the passive node or exclusively from the active node.</span></span>
  
<span data-ttu-id="daf87-198">VSS の[VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙が**VSS_BT_DIFFERENTIAL**に設定されている場合は、次のコンポーネントが差分バックアップに含まれます。</span><span class="sxs-lookup"><span data-stu-id="daf87-198">When the [VSS_BACKUP_TYPE](https://msdn.microsoft.com/library/windows/desktop/aa384679%28v=vs.85%29.aspx) enumeration in VSS is set to **VSS_BT_DIFFERENTIAL**, the following components are included in a differential backup:</span></span> 
  
- <span data-ttu-id="daf87-199">論理パスが指定されたデータベース \\ サーバー名 \> \\<データベース GUID<サーバー名\></span><span class="sxs-lookup"><span data-stu-id="daf87-199">A database with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span> 
    
- <span data-ttu-id="daf87-200">論理パスが含まれているログファイル。 Exchange サーバー名 Microsoft Information Store \\<サーバー名 \> \\<データベース GUID\></span><span class="sxs-lookup"><span data-stu-id="daf87-200">A log file with the logical path Exchange Server\Microsoft Information Store\\<Server Name\>\\<Database GUID\></span></span>
    
## <a name="see-also"></a><span data-ttu-id="daf87-201">関連項目</span><span class="sxs-lookup"><span data-stu-id="daf87-201">See also</span></span>
<span data-ttu-id="daf87-202"><a name="bk_AdditionalResources"> </a></span><span class="sxs-lookup"><span data-stu-id="daf87-202"><a name="bk_AdditionalResources"> </a></span></span>

- [<span data-ttu-id="daf87-203">Exchange 2013 のバックアップと復元アプリケーションの作成</span><span class="sxs-lookup"><span data-stu-id="daf87-203">Build backup and restore applications for Exchange 2013</span></span>](build-backup-and-restore-applications-for-exchange-2013.md)
    
- [<span data-ttu-id="daf87-204">Exchange 2013 のバックアップと復元の概念</span><span class="sxs-lookup"><span data-stu-id="daf87-204">Backup and restore concepts for Exchange 2013</span></span>](backup-and-restore-concepts-for-exchange-2013.md)
    
- [<span data-ttu-id="daf87-205">Exchange 2013 のデータベースを復元する</span><span class="sxs-lookup"><span data-stu-id="daf87-205">Restoring Exchange 2013 databases</span></span>](restoring-exchange-2013-databases.md)
    
- [<span data-ttu-id="daf87-206">Exchange 2013 で CHKSGFILES API を使用してバックアップの整合性を検証する</span><span class="sxs-lookup"><span data-stu-id="daf87-206">Validate backup integrity by using the CHKSGFILES API in Exchange 2013</span></span>](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)
    
- [<span data-ttu-id="daf87-207">Exchange 2013 で Eseutil ツールを使用してバックアップの整合性を検証する</span><span class="sxs-lookup"><span data-stu-id="daf87-207">Validate backup integrity by using the Eseutil tool in Exchange 2013</span></span>](how-to-validate-backup-integrity-by-using-the-eseutil-tool-in-exchange-2013.md)
    

