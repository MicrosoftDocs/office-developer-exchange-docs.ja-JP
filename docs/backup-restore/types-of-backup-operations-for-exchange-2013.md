---
title: Exchange 2013 のバックアップ操作の種類
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 70510902-9583-4177-be3d-afbf757a1ec0
description: データベースを含む完全、コピー、増分、および差分バックアップを格納する、Exchange 2013 で実行できるバックアップの種類についての情報を検索します。
ms.openlocfilehash: 588bc0ffe896f286258006f7f123cf09d28b218c
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2018
ms.locfileid: "19758906"
---
# <a name="types-of-backup-operations-for-exchange-2013"></a>Exchange 2013 のバックアップ操作の種類

データベースを含む完全、コピー、増分、および差分バックアップを格納する、Exchange 2013 で実行できるバックアップの種類についての情報を検索します。
  
**に適用されます:** Exchange Server 2013 
  
Exchange Server 2013 のデータベースに対して実行できるバックアップの種類についての情報を掲載し、それらのバックアップがデータベース ファイルにどのように影響するか。 
  
ボリューム シャドウ コピー サービス (VSS) と Exchange ライターを使用するバックアップと復元アプリケーションでは、次の表に示す種類のバックアップを実行できます。
  
**表 1 です。バックアップ操作の種類**

|**バックアップの種類**|**説明**|
|:-----|:-----|
|[フル ・ バックアップ](types-of-backup-operations-for-exchange-2013.md#bk_FullBackups) <br/> |データベースをバックアップします (\*.edb)、トランザクション ・ ログ (\*.log)、チェックポイント ファイル (\*.chk)、特定のデータベースのトランザクション ・ ログをトランケートし、。  <br/> |
|[コピー ・ バックアップ](types-of-backup-operations-for-exchange-2013.md#bk_CopyBackups) <br/> |データベース、トランザクション ログ、およびチェックポイント ファイルをバックアップします。コピー バックアップでは、データベースのトランザクション ログは切り詰められません。  <br/> |
|[インクリメンタル ・ バックアップ](types-of-backup-operations-for-exchange-2013.md#bk_IncrementalBackups) <br/> |最後の完全バックアップまたは増分バックアップ以降に行われた変更を記録するトランザクション ログをバックアップして、トランザクション ログを切り詰めます。   <br/> |
|[差分バックアップ](types-of-backup-operations-for-exchange-2013.md#bk_DifferentialBackups) <br/> |最後の完全バックアップまたは増分バックアップ以降に行われた変更を記録するトランザクション ログをバックアップしますが、トランザクション ログは切り詰めません。   <br/> |
   
コンポーネント、または Exchange 書き込みプログラムで定義されているデータベース ・ ファイルは、Exchange 2013 のデータベース内のトランザクション ログとデータベース ファイルを表します。 これにより、バックアップ ・ オペレーション中に、Exchange 2013 のデータベース内のコンポーネントの名前を表示するのには、バックアップと復元のアプリケーションです。 バックアップ ・ アプリケーションはバックアップできません個々 のデータベース コンポーネントを実行します。データベース全体バックアップすることができますのみです。 
  
Exchange ライターは、データベース コンポーネントの論理パスを標準化します。このパスは Exchange ライターのメタデータで指定されています。必要に応じて、Exchange ライターはバックアップと復元のアプリケーションに論理パスを返します。
  
Exchange 書き込みプログラムには、フォーム内の論理パスが用意されています。 
  
 `logicalPath = "Exchange Server\Microsoft Information Store\<Server name>"`
  
サーバー コンポーネントとデータベース コンポーネントはファイル グループのコンポーネントですが、関連ファイルはありません。これらには、個々のファイルを指定するサブコンポーネントがあります。データベースには、Logs という名前のログ コンポーネントが 1 つだけ含まれています。個々のデータベース コンポーネントのコンポーネント名は、文字列で表示されるデータベースの GUID です。  
  
Exchange 書き込みプログラムには、データベースのバックアップを VSS フレームワークのガイドラインに基づいているのみ一覧表示されます。 として、Exchange 2013 回復用データベースでは、マウントされていないデータベースがマウントされているデータベースはバックアップできませんと、そのため、Exchange ライターのメタデータに記載されていません。
  
次の図に、Exchange ライターのバックアップ プロセスを示します。  
  
**図 1 です。バックアップ ・ プロセスのイベントのシーケンス**

![バックアップ プロセスのイベント シーケンスを示す図。シーケンスは、Exchange ストアの起動から始まり、Exchange ライター、VSS、およびクライアント アプリケーションの間での多くのステップが続きます。](media/VSS_StoreWriterBackup.gif)
  
## <a name="full-backups"></a>完全バックアップ
<a name="bk_FullBackups"> </a>

Exchange データベースの完全バックアップでは、作成して、データベース ファイル、トランザクション ログ、およびチェックポイント ファイルのコピーを格納する必要があります。 Exchange 2013 のデータベースでは、専用のトランザクション ログ ファイルの 1 つのセットを持っています。
  
データベースのバックアップが終了した後に、ディスク上のトランザクション ログ ファイルが切り詰められます。これで、バックアップ後に実行したデータベースの変更のみが維持されるようになります。このプロセスの間、Exchange ライターは、データベースが直近のチェックポイントまでのすべての変更を含んだ整合状態で現在バックアップされている、という前提に基づいて、チェックポイントまですべてのログ エントリを削除します。  
  
バックアップ操作中にバックアップされているデータベースがマウント解除されている場合 Exchange 2013 はトランザクション ログをトランケートできませんし、コピー バックアップ操作で、フル ・ バックアップ ・ オペレーションではないのと同じ結果になります。 
  
完全バックアップが完了すると、マウントされているアクティブなデータベースのヘッダーが、現在のバックアップ情報を使用して更新されます。レプリケートされた展開では、この情報はトランザクション ログ ファイルにコミットされ、データベースの別の DAG のコピーにレプリケートされます。データベース コピーのヘッダーは、このトランザクション ログ ファイルがデータベース コピーで再生されるように更新されます。
  
完全シャドウ コピー バックアップは、増分シャドウ コピー バックアップまたは差分シャドウ コピー バックアップを実行するために必要です。完全バックアップは、任意のコピー (シャドウ コピー バックアップに限る) から取得できます。
  
完全バックアップは、次に示すシナリオで使用できます。
  
- データベースが破損または消失したが、ディスク上のトランザクション ログ ファイルはそのまま残っている。このシナリオでは、影響を受けるデータベース ファイルを完全バックアップから復元し、ディスク上に残っているトランザクション ログを再生することにより回復します。  
    
- ディスク上のデータベース ファイルとトランザクション ログ ファイルが消失している。このシナリオでは、完全バックアップの際にバックアップされたトランザクション ログ ファイルがデータベースと共に復元されます。
    
Exchange 2013 では、フル ・ バックアップ ・ セットから、該当するデータベースを復元することがなくログを復元できます。 このオプションでは、以前の完全バックアップを復元し、ロール フォワードするには、最新のフル ・ バックアップからのトランザクション ログ ファイルを結合できます。
  
VSS の[VSS_BACKUP_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙体は、Exchange ライターがバックアップを実行すると、 **VSS_BT_FULL**に設定されている場合は、バックアップでは、次のコンポーネントが含まれます。 
  
- Server\Microsoft インフォメーション ストアの Exchange の論理パスを使用してデータベース\\< サーバー名\>\\< データベースの GUID\> 
    
- Server\Microsoft インフォメーション ストアの Exchange の論理パスとログ ファイル\\< サーバー名\>\\< データベースの GUID\> 
    
## <a name="copy-backups"></a>コピー バックアップ
<a name="bk_CopyBackups"> </a>

Exchange データベースのコピー バックアップでは、完全バックアップに含まれる要素と同じ要素を作成して格納する必要があります。ただし、完全バックアップとは異なり、ディスク上のトランザクション ログ ファイルはバックアップが完了しても切り詰められません。コピー バックアップは、データ復旧を目的としたものではありません。その代わりに、コピーバックアップでは、テストや問題の診断、レプリカのシード処理に使用するデータのイメージを提供します。
  
たとえば、2013 の Exchange 管理者は Exchange ストアに問題が発生しているコピーを作成できますバックアップ用にテスト環境で本番システムに影響を与えずに。 コピー ・ バックアップに定期バックアップのスケジュールには影響しませんただし、コピー バックアップでは、Exchange ストアをバックアップの進行中の状態に、あるために、コピー バックアップが完了または中止されるまでに進行してからその他のスケジュール ・ バックアップをブロックします。 
  
VSS で[VSS_BACKUP_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384679%28v=vs.85%29.aspx)の列挙体を**VSS_BT_COPY**に設定すると、コピー バックアップでは次のコンポーネントが含まれます。 
  
- Server\Microsoft インフォメーション ストアの Exchange の論理パスを使用してデータベース\\< サーバー名\>\\< データベースの GUID\> 
    
- Server\Microsoft インフォメーション ストアの Exchange の論理パスとログ ファイルのコンポーネント\\< サーバー名\>\\< データベースの GUID\>
    
## <a name="incremental-backups"></a>増分バックアップ
<a name="bk_IncrementalBackups"> </a>

Exchange 2013 のデータベースの増分バックアップは、前回の完全または増分バックアップ以降に発生したデータベースに変更を保存します。 すべてのデータベース ファイルとログ ファイルがシステムに復元されるときは、前回の差分バックアップの時点の状態にリカバリできます。 増分バックアップに格納されているデータには、現在の時刻までトランザクション ログ ファイルのみが含まれています。 
  
バックアップが完了すると、Exchange サーバーはログ ファイルを切り詰め、データベース ヘッダー内にあるバックアップの時間をマークします。増分バックアップを使用してデータベースを回復するには、復元されるデータ セットが少なくとも 2 つ (直前の完全バックアップと、その後のすべての増分バックアップ) 必要です。増分バックアップの使用には、個々のバックアップが完全バックアップよりはるかに小さいことや、個々の増分バックアップが差分バックアップより小さくなることが多いという利点があります。  
  
増分バックアップの使用には、完全バックアップと完全バックアップの間に何度も増分バックアップを行うと、Exchange ストアの回復によって多くの増分バックアップを引き起こす可能性があるという欠点もあります。Exchange では、増分の変更の開始点を確立するための、以前の完全バックアップがない場合、増分バックアップを実行できません。  
  
増分バックアップ作業中の場所から、その逆の場合では、DAG のコピーの場所から取得した完全バックアップを実行できます。 アクティブなデータベースのヘッダーの最後のバックアップの状態が維持され、データベース ヘッダーに変更が複製され、他のすべてのトランザクションと同じようにコピーのデータベースの場所で再生されたトランザクション ・ ログに書き込まれますことは、1 つの制限に留意してください。DAG 展開でログに記録します。 バックアップ ・ アプリケーションがノードは、アクティブまたはパッシブにするかどうかに関係なく、特定の DAG ノード上で排他的にバックアップを実行すると、パッシブ ノードからのみバックアップを実行する機能を提供できるため、バックアップとリストアの相互運用性、またはのみ、アクティブ ノードから。
  
VSS の[VSS_BACKUP_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙体は、 **VSS_BT_INCREMENTAL**に設定されているときにインクリメンタル ・ バックアップでは次のコンポーネントが含まれています。 
  
- Server\Microsoft インフォメーション ストアの Exchange の論理パスを使用してデータベース\\< サーバー名\>\\< データベースの GUID\> 
    
- Server\Microsoft インフォメーション ストアの Exchange の論理パスとログ ファイル\\< サーバー名\>\\< データベースの GUID\>
    
## <a name="differential-backups"></a>差分バックアップ
<a name="bk_DifferentialBackups"> </a>

Exchange 2013 のデータベースの差分バックアップは、前回の完全または増分バックアップ以降に発生したデータベースに変更を保存します。 システムによって、データベース ファイルとログ ファイルが復元されると、最後の差分バックアップされた状態にリカバリできます。 
  
差分バックアップに格納されているデータには、現在のチェックポイントまでのトランザクション ログ ファイルのみが含まれています。差分バックアップでは、ログ ファイルを削除または変更しないでください。または、データベースのヘッダーを変更しないでください。データベースの回復に差分バックアップを使用する場合は、2 つのデータ セット (直前の完全バックアップと、その後に最新の差分バックアップ) のみを復元する必要があります。  
  
差分バックアップの使用には、完全バックアップが実行されるまで差分バックアップは各バックアップ内のバックアップされたデータを重複させる、という欠点があります。　完全バックアップと完全バックアップの間に何度も差分バックアップを行うと、必要な記憶域の量は、同じ回数の増分バックアップに必要な量を超える可能性があります。Exchange では、異なるバックアップの変更の開始点を確立するための完全バックアップまたは増分バックアップがない場合、差分バックアップを実行できません。
  
コピーの場所から取得した完全バックアップに続いて、アクティブな場所とその逆の場所からの差分バックアップを実行できます。最後のバックアップの状態がアクティブなデータベースのヘッダーに維持されていること、データベースのヘッダーに対する変更がトランザクション ログに書き込まれ、レプリケートされ、DAG 展開の他のすべてのトランザクション ログと同様にコピー データベースの場所で再生されること、などの制限に留意してください。バックアップと復元は相互運用されるため、バックアップ アプリケーションでは特定の DAG ノード上で排他的にすべてのバックアップを実行する機能を提供します。これは、ノードがアクティブでもパッシブでも関係ありません。また、パッシブ ノードからの排他的なバックアップの実行でもアクティブ ノードからの排他的なバックアップの実行でも関係ありません。
  
VSS の[VSS_BACKUP_TYPE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384679%28v=vs.85%29.aspx)列挙体は、 **VSS_BT_DIFFERENTIAL**に設定されているとは、差分バックアップでは、次のコンポーネントが含まれます。 
  
- Server\Microsoft インフォメーション ストアの Exchange の論理パスを使用してデータベース\\< サーバー名\>\\< データベースの GUID\> 
    
- Server\Microsoft インフォメーション ストアの Exchange の論理パスとログ ファイル\\< サーバー名\>\\< データベースの GUID\>
    
## <a name="see-also"></a>関連項目
<a name="bk_AdditionalResources"> </a>

- [バックアップを作成し、Exchange 2013 のアプリケーションを復元します。](build-backup-and-restore-applications-for-exchange-2013.md)
    
- [Exchange 2013 のバックアップと復元の概念](backup-and-restore-concepts-for-exchange-2013.md)
    
- [2013 の Exchange データベースを復元します。](restoring-exchange-2013-databases.md)
    
- [Exchange 2013 の CHKSGFILES API を使用してバックアップの整合性を検証します。](how-to-validate-backup-integrity-by-using-the-chksgfiles-api-in-exchange.md)
    
- [Exchange 2013 の Eseutil ツールを使用してバックアップの整合性を検証します。](how-to-validate-backup-integrity-by-using-the-eseutil-tool-in-exchange-2013.md)
    

