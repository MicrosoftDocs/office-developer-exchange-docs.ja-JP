---
title: Exchange でのバックアップと復元のトランザクションログとチェックポイントファイル
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 80e04b9f-87c7-4acf-89b1-aa66ffaf7e53
description: トランザクションログとチェックポイントファイルについての情報と、Exchange 2013 データのバックアップと復元にどのように使用されているかを確認します。
ms.openlocfilehash: 5b01fc6924f82e76943795df877ae84b1fde087b
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2020
ms.locfileid: "44456389"
---
# <a name="transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange"></a>Exchange でのバックアップと復元のトランザクションログとチェックポイントファイル

トランザクションログとチェックポイントファイルについての情報と、Exchange 2013 データのバックアップと復元にどのように使用されているかを確認します。
  
**製品:** Exchange Server 2013 
  
この記事では、Exchange Server 2013 がトランザクションログとチェックポイントファイルを使用してデータ損失を防ぐ方法について説明します。 この情報は、Windows Server 2008 以降の Windows Server の各バージョンでボリューム シャドウ コピー サービス (VSS) を使用するバックアップおよび復元アプリケーションを開発するときに重要になります。
  
## <a name="transaction-logs-in-exchange-2013"></a>Exchange 2013 のトランザクション ログ

Exchange 2013 は、データベースごとに1つのトランザクションログファイルセットを保持します。 トランザクションは、データベースの状態または内容を変更する任意の操作として定義されます。 各データベースのトランザクションログファイルには、データベースで実行されたすべてのトランザクションが記録されます。 トランザクションのレコードは、データベース内で実行される前にトランザクションログに書き込まれます。これにより、データベースの障害が発生した場合に、コミットされたすべてのトランザクションを回復できるようになります。 Exchange 2013 データベースのトランザクションログは、トランザクションがデータベースファイルにコミットされる前にディスクに格納されます。 
  
データベースが更新される前のトランザクションの記録は、先行書き込みログと呼ばれます。 データベースが正しい状態に戻されるようにするために、Exchange 2013 は、ページベースの書き込みとチェックポイントを使用してデータベースファイルにデータを書き込みます。 通常の操作では、Exchange ストアは最初にデータベースの変更をトランザクションログに記録した後、データベースのメモリ内コピーにその変更を加えます。 トランザクションログには、各トランザクションの開始と終了が記録されます。 これにより、後でデータベースの操作を元に戻したりロールバックしたりするために十分な情報を利用できるようになります。
  
ディスク上のデータベース ファイルが破損していても、トランザクション ログ ファイルが無事なときのエラーから回復する場合、復元アプリケーションでは、最初に正常だとわかっているデータベース ファイルのコピーを復元する必要があります。
  
Exchange ストアは、以前にバックアップしたトランザクション ログからトランザクションを再生してから、残りのトランザクションをディスク上のトランザクション ログ ファイルから再生します。トランザクションがトランザクション ログに記録される時点と、そのトランザクションが実際にデータベース ファイルに書き込まれる時点の間でシステムに障害が発生すると、トランザクションが失われる可能性がある点にご注意ください。  
  
Exchange ストアは、定期的にメモリ内のデータベース イメージを調べて、どのページに変更があったかを判断します。Exchange ストアは、保留中の変更を結合してから、該当するページをディスク上のデータベース ファイルに書き込みます。
  
## <a name="checkpoint-files-in-exchange-2013"></a>Exchange 2013 のチェックポイント ファイル

チェックポイント ファイルには、ログに記録されたトランザクションのどれがディスク上のデータベース ファイルに書き込まれたかを記録します。チェックポイント ファイルは、トランザクション ログのエントリで更新されたすべてのデータベース ページが正常にディスクに書き込まれた時点で先に進められます。チェックポイント ファイルは、既にディスク上のデータベース イメージに含まれるトランザクションを記録しているため、Exchange ストアは、チェックポイントの後に発生したトランザクションを再生するだけで十分です。バックアップ周期の長さによっては、システム障害時にデータベースに再生する必要のあるトランザクションの数を大幅に削減できます。
  
## <a name="see-also"></a>関連項目

- [Exchange 2013 のバックアップと復元の概念](backup-and-restore-concepts-for-exchange-2013.md)
- [Exchange 2013 のバックアップ操作の種類](types-of-backup-operations-for-exchange-2013.md)
- [Exchange 2013 のデータベースを復元する](restoring-exchange-2013-databases.md)
    

