---
title: Exchange 2013 のバックアップと復元の概念
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 9a1c4709-9313-4ccf-9f8a-673a51d51f23
description: Exchange 2013 のバックアップと復元アプリケーションの作成に役立つ Exchange データベースについての情報を参照してください。
ms.openlocfilehash: fd35699839af105dd3fe285776b071c1d03d58dd
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/31/2020
ms.locfileid: "44437985"
---
# <a name="backup-and-restore-concepts-for-exchange-2013"></a><span data-ttu-id="a0a6b-103">Exchange 2013 のバックアップと復元の概念</span><span class="sxs-lookup"><span data-stu-id="a0a6b-103">Backup and restore concepts for Exchange 2013</span></span>

<span data-ttu-id="a0a6b-104">Exchange 2013 のバックアップと復元アプリケーションの作成に役立つ Exchange データベースについての情報を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-104">Find information about Exchange databases that will help you create your backup and restore applications for Exchange 2013.</span></span>
  
<span data-ttu-id="a0a6b-105">Exchange Server 2013 のバックアップと復元アプリケーションを作成する前に、Exchange データベースファイル構造について理解しておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-105">Before you create backup and restore applications for Exchange Server 2013, you should be familiar with the Exchange database file structure.</span></span> <span data-ttu-id="a0a6b-106">Exchange ストアデータベースファイルを使用すると、ストア内のデータをバックアップし、必要に応じて後で復元することができます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-106">By using the Exchange store database files, you can back up the data in your store and restore it at a later time as needed.</span></span> <span data-ttu-id="a0a6b-107">ディスク容量に制限がある場合は、管理者が循環ログを実装している可能性があります。これにより、データベースをバックアップすることができます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-107">If you are limited on disk space, your administrator might implement circular logging, and this will affect your ability to back up the database.</span></span> <span data-ttu-id="a0a6b-108">Exchange 2013 のデータベースモビリティ機能を利用して、Exchange データのバックアップと復元を行うこともできます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-108">You can also take advantage of the database mobility feature in Exchange 2013 to back up and restore Exchange data.</span></span> <span data-ttu-id="a0a6b-109">データベースモビリティは、バックアップと復元のアプリケーションと組み合わせて、障害復旧のための冗長な手段となります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-109">Database mobility, in combination with your backup and restore application, is a good measure of redundancy for disaster recovery.</span></span>

<span data-ttu-id="a0a6b-110"><a name="bk_exchangedatabases"> </a></span><span class="sxs-lookup"><span data-stu-id="a0a6b-110"><a name="bk_exchangedatabases"> </a></span></span>

## <a name="exchange-store-database-files"></a><span data-ttu-id="a0a6b-111">Exchange ストアのデータベース ファイル</span><span class="sxs-lookup"><span data-stu-id="a0a6b-111">Exchange store database files</span></span>

<span data-ttu-id="a0a6b-112">Exchange 2013 には、最大100データベースのサポートが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-112">Exchange 2013 includes support for up to 100 databases.</span></span> <span data-ttu-id="a0a6b-113">各 Exchange 2013 データベースには、次の表に示すファイルが含まれています。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-113">Each Exchange 2013 database contains the files listed in the following table.</span></span> 
  
<span data-ttu-id="a0a6b-114">**表1Exchange 2013 データベースファイル**</span><span class="sxs-lookup"><span data-stu-id="a0a6b-114">**Table 1. Exchange 2013 database files**</span></span>

|<span data-ttu-id="a0a6b-115">ファイルの種類</span><span class="sxs-lookup"><span data-stu-id="a0a6b-115">File type</span></span>|<span data-ttu-id="a0a6b-116">拡張子</span><span class="sxs-lookup"><span data-stu-id="a0a6b-116">Extension</span></span>|<span data-ttu-id="a0a6b-117">説明</span><span class="sxs-lookup"><span data-stu-id="a0a6b-117">Description</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="a0a6b-118">データベース ファイル</span><span class="sxs-lookup"><span data-stu-id="a0a6b-118">Database file</span></span>  <br/> |<span data-ttu-id="a0a6b-119">\*.edb</span><span class="sxs-lookup"><span data-stu-id="a0a6b-119">\*.edb</span></span>  <br/> |<span data-ttu-id="a0a6b-120">メモリ内のデータベースにコミットされたすべての変更を記録します。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-120">Records all the changes that have been committed to the in-memory database.</span></span>  <br/> |
|<span data-ttu-id="a0a6b-121">トランザクション ログ ストリーム</span><span class="sxs-lookup"><span data-stu-id="a0a6b-121">Transaction log stream</span></span>  <br/> |<span data-ttu-id="a0a6b-122">\*.log</span><span class="sxs-lookup"><span data-stu-id="a0a6b-122">\*.log</span></span>  <br/> |<span data-ttu-id="a0a6b-p103">データベースにコミットされる、メッセージの変更または作成などのレコードの操作。それぞれ 1 MB のサイズに制限されます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-p103">Records operations, such as the creation or modification of a message, that will be committed to the database. Limited in size to 1 MB each.</span></span>  <br/> |
|<span data-ttu-id="a0a6b-125">チェックポイント ファイル</span><span class="sxs-lookup"><span data-stu-id="a0a6b-125">Checkpoint file</span></span>  <br/> |<span data-ttu-id="a0a6b-126">\*.chk</span><span class="sxs-lookup"><span data-stu-id="a0a6b-126">\*.chk</span></span>  <br/> |<span data-ttu-id="a0a6b-127">トランザクションがログに記録されるレコードは、ディスク上のデータベース ファイルに記載されています。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-127">Records which logged transactions have been written to the on-disk database files.</span></span>  <br/> |
   
<span data-ttu-id="a0a6b-128">Exchange 2013 は、データベースごとに1つのトランザクションログファイルセットを保持します。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-128">Exchange 2013 maintains a single set of transaction log files for each database.</span></span> <span data-ttu-id="a0a6b-129">トランザクション ログは、バックアップ操作と回復操作において重要になります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-129">The transaction logs are important for backup and recovery operations.</span></span> <span data-ttu-id="a0a6b-130">バックアップを作成するボリューム シャドウ コピー サービス (VSS) を使用するアプリケーションを復元する場合は、これらのログを正しく処理していることを確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-130">When you create a backup and restore application that uses the Volume Shadow Copy Service (VSS), you must ensure that you handle these logs correctly.</span></span> <span data-ttu-id="a0a6b-131">詳細については、「[Exchange 2013 のバックアップと復元のトランザクション ログとチェックポイント ファイル](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-131">For more information, see [Transaction logs and checkpoint files for backup and restore in Exchange 2013](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md).</span></span> <span data-ttu-id="a0a6b-132">データベースと、データベースのログ ストリームをバックアップするには、そのデータベースとログが含まれているボリューム全体をバックアップする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-132">To back up a database and its log stream, you must back up the entire volume that contains the database and logs.</span></span> <span data-ttu-id="a0a6b-133">ログの切り捨ては、Exchange データベースを含むボリュームまたはフォルダーの完全バックアップが正常に完了した後にのみ行われます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-133">Log truncation will occur only after a successful completion of a full backup of a volume or folders that contain an Exchange database.</span></span>
  
<span data-ttu-id="a0a6b-134">各 Exchange サーバーで同時にマウントできる回復用データベースは 1 つのみです。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-134">On each Exchange server, you can mount only one recovery database at a time.</span></span> <span data-ttu-id="a0a6b-135">回復用データベースには、**New-MailboxRestoreRequest** などの Exchange 管理シェル コマンドレットを使用してアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-135">You can access the recovery database by using Exchange Management Shell cmdlets such as **New-MailboxRestoreRequest**.</span></span> <span data-ttu-id="a0a6b-136">Exchange 回復データベースの詳細については、TechNet の「[回復用データベース](https://technet.microsoft.com/library/dd876954%28v=exchg.150%29.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-136">For more information about Exchange recovery databases, see [Recovery Databases](https://technet.microsoft.com/library/dd876954%28v=exchg.150%29.aspx) on TechNet.</span></span> <span data-ttu-id="a0a6b-137">Exchange 管理シェルコマンドレットの詳細については、TechNet の「 [exchange 2013 コマンドレット](https://technet.microsoft.com/library/bb124413.aspx)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-137">For more information about Exchange Management Shell cmdlets, see [Exchange 2013 Cmdlets](https://technet.microsoft.com/library/bb124413.aspx) on TechNet.</span></span> 
  
## <a name="circular-logging"></a><span data-ttu-id="a0a6b-138">循環ログ</span><span class="sxs-lookup"><span data-stu-id="a0a6b-138">Circular logging</span></span>
<span data-ttu-id="a0a6b-139"><a name="bk_circularlogging"> </a></span><span class="sxs-lookup"><span data-stu-id="a0a6b-139"><a name="bk_circularlogging"> </a></span></span>

<span data-ttu-id="a0a6b-140">ストレージ容量に問題がある場合は、管理者が循環ログを有効にする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-140">If storage capacity is an issue, your administrator might enable circular logging.</span></span> <span data-ttu-id="a0a6b-141">循環ログを有効にすると、Exchange は通常どおりにトランザクション ログを書き込みますが、チェックポイント ファイルを拡張すると、トランザクション ログのアクティブでない部分が切り捨てられます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-141">When circular logging is enabled, Exchange writes transaction logs as usual, but when a checkpoint file is advanced, the inactive portion of the transaction log is truncated.</span></span> <span data-ttu-id="a0a6b-142">VSS を使用してカスタムのバックアップおよび復元操作を有効にする場合は、管理者は、循環ログを使用するように Exchange 2013 データベースを構成しないようにしてください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-142">Your administrator should not configure Exchange 2013 databases to use circular logging if you also plan to use VSS to enable your custom backup and restore operations.</span></span> <span data-ttu-id="a0a6b-143">循環ログには、次の制限があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-143">Circular logging creates the following restrictions:</span></span> 
  
- <span data-ttu-id="a0a6b-144">バックアップ操作または回復操作中に循環ログが有効な場合、個々のデータベースを復元することはできません。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-144">If enabled during the backup operation or the recovery operation, you cannot restore individual databases.</span></span>
    
- <span data-ttu-id="a0a6b-145">ポイントインタイムの回復操作のみが可能です。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-145">Only point-in-time recovery operations are possible.</span></span> <span data-ttu-id="a0a6b-146">循環ログが有効になっている場合は、データベースを復元するときに、同じディレクトリのトランザクションログを削除できます。ただし、これらのログは別の Exchange 2013 データベースの一部である場合もあります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-146">When circular logging is enabled, you can delete transaction logs in the same directory when a database is restored, although those logs might be part of a different Exchange 2013 database.</span></span> 
    
- <span data-ttu-id="a0a6b-147">増分または差分のバックアップ操作は実行できません。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-147">You cannot perform incremental or differential backup operations.</span></span> <span data-ttu-id="a0a6b-148">これらのバックアップの種類の詳細については、「 [Exchange 2013 のバックアップ操作の種類](types-of-backup-operations-for-exchange-2013.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-148">For more information about these types of backups, see [Types of backup operations for Exchange 2013](types-of-backup-operations-for-exchange-2013.md).</span></span>
    
<span data-ttu-id="a0a6b-149">循環ログが有効になっている場合、管理者はこれをできるだけ早く無効にして、VSS のバックアップが失敗しないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-149">If circular logging is enables, your administrator should disable it as soon as possible to ensure that your VSS backups don't fail.</span></span> <span data-ttu-id="a0a6b-150">詳細については、ブログの「 [Exchange の循環ログおよび VSS バックアップ](https://blogs.technet.com/b/exchange/archive/2010/08/18/3410672.aspx)の投稿」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-150">For more information, check out the blog post [Exchange Circular Logging and VSS Backups](https://blogs.technet.com/b/exchange/archive/2010/08/18/3410672.aspx).</span></span> 
  
## <a name="exchange-database-mobility"></a><span data-ttu-id="a0a6b-151">Exchange データベース モビリティ</span><span class="sxs-lookup"><span data-stu-id="a0a6b-151">Exchange database mobility</span></span>
<span data-ttu-id="a0a6b-152"><a name="bk_exchangedatabasemobility"> </a></span><span class="sxs-lookup"><span data-stu-id="a0a6b-152"><a name="bk_exchangedatabasemobility"> </a></span></span>

<span data-ttu-id="a0a6b-153">Exchange 2013 では、データベースのモビリティを使用して、メールボックスの信頼性と可用性を向上させることができます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-153">Exchange 2013 allows for database mobility to improve mailbox reliability and availability.</span></span> <span data-ttu-id="a0a6b-154">データベース モビリティにより、Exchange ストア データベースのコピーを作成し、サーバーからデータベースを切断して別のサーバーにコピーを保存できます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-154">Database mobility enables you to make copies of your Exchange store database, disconnect the database from the server, and store it on another server.</span></span> <span data-ttu-id="a0a6b-155">Exchange 2013 データベース可用性グループ (DAG) では、データベースの複数のコピーが異なるコンピューターに格納されます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-155">In an Exchange 2013 Database Availability Group (DAG), multiple copies of the database are stored on different computers.</span></span> <span data-ttu-id="a0a6b-156">ハードウェアまたはその他のシステム障害が発生したために、データベースの 1 つまたは複数のコピーが失われた場合は、他のコピーからの情報を使用して、通常のレプリケーション操作でデータベースを再シードできます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-156">When one or more copies of the database are lost due to hardware or other system failure, information from the other copies can be used to reseed the database via normal replication operations.</span></span>
  
<span data-ttu-id="a0a6b-157">バックアップ操作で、バックアップする Exchange 2013 データベースが DAG 内で構成されている場合、バックアップアプリケーションは、非アクティブなデータベースコピーのいずれかのスナップショットを使用することにより、スナップショットとアクティブなサーバーのパフォーマンスとの間の干渉を防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-157">For backup operations, if the Exchange 2013 databases that are to be backed up are configured in a DAG, the backup application can better prevent interference between the snapshot and the active server's performance by taking the snapshot on one of the inactive database copies.</span></span> <span data-ttu-id="a0a6b-158">データベースのコピーは同期の大部分にあたるため、バックアップ アプリケーションはデータベースの別のコピーからスナップショットを取得して、後にその部分から再構築することができます。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-158">Because the database copies are for the most part synchronized, the backup application can take snapshots from different copies of the database, and later reconstruct it from the pieces.</span></span>
  
<span data-ttu-id="a0a6b-p112">DAG のデータベースをバックアップ データから復元するための、唯一サポートされている方法は、同じバックアップ データを使用してデータベースのすべてのコピーを復元することです。データベースのログ ファイルはコピーの間でわずかに異なる可能性があるため、別のデータを使用して個々のデータベースのコピーを復元すると、データベースがマウントできなくなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="a0a6b-p112">The only supported method of restoring DAG databases from backup data is to restore all copies of the database by using the same backup data. Because the database log files might be slightly different between the copies, restoring individual database copies using different data can cause the database to become unmountable.</span></span>
  
## <a name="in-this-section"></a><span data-ttu-id="a0a6b-161">このセクションの内容</span><span class="sxs-lookup"><span data-stu-id="a0a6b-161">In this section</span></span>
<span data-ttu-id="a0a6b-162"><a name="bk_inthissection"> </a></span><span class="sxs-lookup"><span data-stu-id="a0a6b-162"><a name="bk_inthissection"> </a></span></span>

- [<span data-ttu-id="a0a6b-163">Exchange 2013 のバックアップと復元のトランザクション ログとチェックポイント ファイル</span><span class="sxs-lookup"><span data-stu-id="a0a6b-163">Transaction logs and checkpoint files for backup and restore in Exchange 2013</span></span>](transaction-logs-and-checkpoint-files-for-backup-and-restore-in-exchange.md)
    
- [<span data-ttu-id="a0a6b-164">Exchange 2013 の Exchange ライター</span><span class="sxs-lookup"><span data-stu-id="a0a6b-164">Exchange writer in Exchange 2013</span></span>](exchange-writer-in-exchange-2013.md)
    
## <a name="see-also"></a><span data-ttu-id="a0a6b-165">関連項目</span><span class="sxs-lookup"><span data-stu-id="a0a6b-165">See also</span></span>

- [<span data-ttu-id="a0a6b-166">Exchange Online と Exchange の開発</span><span class="sxs-lookup"><span data-stu-id="a0a6b-166">Exchange Online and Exchange development</span></span>](../exchange-server-development.md) 
- [<span data-ttu-id="a0a6b-167">Exchange 2013 のバックアップ操作の種類</span><span class="sxs-lookup"><span data-stu-id="a0a6b-167">Types of backup operations for Exchange 2013</span></span>](types-of-backup-operations-for-exchange-2013.md)
- [<span data-ttu-id="a0a6b-168">Exchange 2013 のデータベースを復元する</span><span class="sxs-lookup"><span data-stu-id="a0a6b-168">Restoring Exchange 2013 databases</span></span>](restoring-exchange-2013-databases.md)
    

