---
title: Exchange 2013 におけるトランスポート エージェントの概念
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 0c700af8-2792-4d3f-8571-8860e0550d8e
description: トランスポート エージェントのパイプラインとサーバーの役割のアーキテクチャでは、Exchange 2013 に与える影響について、トランスポート エージェントの開発とトランスポート エージェントの開発に使用できるクラスについての情報を検索します。
ms.openlocfilehash: 9ddee0d68c9104357f84322b2cce7c5f2576d871
ms.sourcegitcommit: 34041125dc8c5f993b21cebfc4f8b72f0fd2cb6f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/25/2018
ms.locfileid: "19759263"
---
# <a name="transport-agent-concepts-in-exchange-2013"></a><span data-ttu-id="80247-103">Exchange 2013 におけるトランスポート エージェントの概念</span><span class="sxs-lookup"><span data-stu-id="80247-103">Transport agent concepts in Exchange 2013</span></span>

<span data-ttu-id="80247-104">トランスポート エージェントのパイプラインとサーバーの役割のアーキテクチャでは、Exchange 2013 に与える影響について、トランスポート エージェントの開発とトランスポート エージェントの開発に使用できるクラスについての情報を検索します。</span><span class="sxs-lookup"><span data-stu-id="80247-104">Find information about how the transport agent pipeline and server role architecture in Exchange 2013 affect transport agent development, and the classes that you can use to develop transport agents.</span></span> 
  
<span data-ttu-id="80247-105">**に適用されます:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="80247-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="80247-106">イベントを登録して、トランスポート パイプラインを通過するときに、メッセージに対してアクションを実行するトランスポート エージェントを実装するために Exchange Server 2013 で提供されるクラス ライブラリを使用できます。</span><span class="sxs-lookup"><span data-stu-id="80247-106">You can use the class library provided in Exchange Server 2013 to implement transport agents that register for events and take actions on messages as they pass through the transport pipeline.</span></span> <span data-ttu-id="80247-107">トランスポート エージェントは、メッセージを変更し、コンテンツの変換にも使用できます。</span><span class="sxs-lookup"><span data-stu-id="80247-107">You can also use transport agents to modify messages and convert content.</span></span> 
  
<span data-ttu-id="80247-108">この資料では、トランスポート エージェントについての情報とトランスポート パイプラインのアーキテクチャを提供します。</span><span class="sxs-lookup"><span data-stu-id="80247-108">This article provides information about transport agents and the transport pipeline architecture.</span></span> <span data-ttu-id="80247-109">組織のニーズに対応するトランスポートの動作を変更するように、トランスポート パイプラインのアーキテクチャを理解する重要です。</span><span class="sxs-lookup"><span data-stu-id="80247-109">It is important to understand the architecture of the transport pipeline so that you can modify transport behavior to meet your organization's needs.</span></span> <span data-ttu-id="80247-110">この資料では、トランスポート エージェントに影響を及ぼす Exchange 2013 のアーキテクチャやトランスポート エージェントの開発に使用できるクラスの変更に関する情報も提供します。</span><span class="sxs-lookup"><span data-stu-id="80247-110">This article also provides information about changes in the Exchange 2013 architecture that affect transport agents and the classes that you can use to develop transport agents.</span></span> 
  
## <a name="transport-agents-in-the-transport-pipeline"></a><span data-ttu-id="80247-111">トランスポート パイプライン内のトランスポート エージェント</span><span class="sxs-lookup"><span data-stu-id="80247-111">Transport agents in the transport pipeline</span></span>
<span data-ttu-id="80247-112"><a name="Pipeline"> </a></span><span class="sxs-lookup"><span data-stu-id="80247-112"></span></span>

<span data-ttu-id="80247-113">トランスポート エージェントは、次に示す 3 つのクラスのいずれかから派生します。</span><span class="sxs-lookup"><span data-stu-id="80247-113">Transport agents are derived from one of the following three classes:</span></span>
  
- [<span data-ttu-id="80247-114">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="80247-114">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)
- [<span data-ttu-id="80247-115">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="80247-115">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)
- [<span data-ttu-id="80247-116">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="80247-116">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)
    
<span data-ttu-id="80247-p103">トランスポート パイプラインとは、Exchange 2013 組織の境界内でのメッセージ データの流れのことを意味します。パイプラインは、次の表に示したサービスによって成立します。</span><span class="sxs-lookup"><span data-stu-id="80247-p103">The transport pipeline refers to the flow of message data within the boundaries of an Exchange 2013 organization. The pipeline consists of the services listed in the following table.</span></span>
  
<span data-ttu-id="80247-119">**表 1 です。トランスポート パイプライン サービス**</span><span class="sxs-lookup"><span data-stu-id="80247-119">**Table 1. Transport pipeline services**</span></span>

|<span data-ttu-id="80247-120">**サービス**</span><span class="sxs-lookup"><span data-stu-id="80247-120">**Service**</span></span>|<span data-ttu-id="80247-121">**説明**</span><span class="sxs-lookup"><span data-stu-id="80247-121">**Description**</span></span>|<span data-ttu-id="80247-122">**サポートされているクラス**</span><span class="sxs-lookup"><span data-stu-id="80247-122">**Classes supported**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="80247-123">フロント エンド トランスポート </span><span class="sxs-lookup"><span data-stu-id="80247-123">Front End Transport</span></span>  <br/> |<span data-ttu-id="80247-124">すべての[クライアント アクセス サーバー](http://technet.microsoft.com/ja-jp/library/dd298114%28v=exchg.150%29.aspx)上で実行し、すべて受信および送信外部 SMTP トラフィックを Exchange 2013 組織のステートレス プロキシとして機能します。</span><span class="sxs-lookup"><span data-stu-id="80247-124">Runs on all [Client Access servers](http://technet.microsoft.com/ja-jp/library/dd298114%28v=exchg.150%29.aspx) and acts as a stateless proxy for all inbound and outbound external SMTP traffic for the Exchange 2013 organization.</span></span> <span data-ttu-id="80247-125">フロント エンド トランスポート サービスは、メッセージ コンテンツを検査またはキューにメッセージをローカルでは。</span><span class="sxs-lookup"><span data-stu-id="80247-125">The Front End Transport service doesn't inspect message content or queue any messages locally.</span></span> <span data-ttu-id="80247-126">これは、[メールボックス サーバー](http://technet.microsoft.com/ja-jp/library/jj150491%28v=exchg.150%29.aspx)上のトランスポート サービスと通信します。</span><span class="sxs-lookup"><span data-stu-id="80247-126">It communicates with the Transport service on a [Mailbox server](http://technet.microsoft.com/ja-jp/library/jj150491%28v=exchg.150%29.aspx).</span></span>  <br/> |[<span data-ttu-id="80247-127">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="80247-127">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="80247-128">Transport</span><span class="sxs-lookup"><span data-stu-id="80247-128">Transport</span></span>  <br/> |<span data-ttu-id="80247-129">すべてのメールボックス サーバーで実行し、Exchange Server 2010 の[ハブ トランスポート サーバー](http://technet.microsoft.com/ja-jp/library/bb123494%28v=exchg.141%29.aspx)の役割に似ています。</span><span class="sxs-lookup"><span data-stu-id="80247-129">Runs on all Mailbox servers and is similar to the [Hub Transport server](http://technet.microsoft.com/ja-jp/library/bb123494%28v=exchg.141%29.aspx) role in Exchange Server 2010.</span></span> <span data-ttu-id="80247-130">トランスポート サービスは、それ自体と、メールボックス トランスポート サービスとフロント エンド トランスポート サービス間のメッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="80247-130">The Transport service routes messages between itself and the Mailbox Transport and Front End Transport services.</span></span> <span data-ttu-id="80247-131">このサービスはメールボックス データベースと直接通信しません。</span><span class="sxs-lookup"><span data-stu-id="80247-131">This service does not communicate directly with mailbox databases.</span></span>  <br/> |[<span data-ttu-id="80247-132">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="80247-132">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> [<span data-ttu-id="80247-133">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="80247-133">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> [<span data-ttu-id="80247-134">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="80247-134">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
|<span data-ttu-id="80247-135">メールボックス トランスポート</span><span class="sxs-lookup"><span data-stu-id="80247-135">Mailbox Transport</span></span>  <br/> |<span data-ttu-id="80247-136">すべてのメールボックス サーバー上で実行され、2 つの独立したサービスで構成されています: メールボックス トランスポートの送信およびメールボックス トランスポート配信します。</span><span class="sxs-lookup"><span data-stu-id="80247-136">Runs on all Mailbox servers and consists of two separate services: Mailbox Transport Submission and Mailbox Transport Delivery.</span></span> <span data-ttu-id="80247-137">メールボックス トランスポート配信では、トランスポート サービスから SMTP メッセージを受信し、メッセージを配信するのには、Exchange リモート プロシージャ コール (RPC) を使用してメールボックス データベースに接続します。</span><span class="sxs-lookup"><span data-stu-id="80247-137">Mailbox Transport Delivery receives SMTP messages from the Transport service, and connects to the mailbox database by using an Exchange remote procedure call (RPC) to deliver the message.</span></span> <span data-ttu-id="80247-138">メールボックス トランスポートの送信は、メッセージを取得するために RPC を使用してメールボックス データベースに接続し、SMTP 経由でトランスポート サービスにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="80247-138">Mailbox Transport Submission connects to the mailbox database using RPC to retrieve messages, and submits the messages via SMTP to the Transport service.</span></span>  <br/> |<span data-ttu-id="80247-139">なし</span><span class="sxs-lookup"><span data-stu-id="80247-139">None.</span></span>  <br/> |
   
### <a name="transport-events"></a><span data-ttu-id="80247-140">トランスポート イベント</span><span class="sxs-lookup"><span data-stu-id="80247-140">Transport events</span></span>
<span data-ttu-id="80247-141"><a name="Events"> </a></span><span class="sxs-lookup"><span data-stu-id="80247-141"></span></span>

<span data-ttu-id="80247-p107">トランスポート エージェントは、まずイベントを登録して、そのイベントが発生したときにアクションを起こすことで実装します。3 種類のそれぞれのエージェントで、異なるイベントのセットを登録できます。</span><span class="sxs-lookup"><span data-stu-id="80247-p107">You implement transport agents by first registering for an event, and then taking an action when that event fires. Each of the three agent types can register for a different set of events.</span></span>
  
<span data-ttu-id="80247-144">次の図は、トランスポート エージェントがトランスポート パイプラインのどの部分でイベントを登録できるかを示しています。</span><span class="sxs-lookup"><span data-stu-id="80247-144">The following figure shows where in the transport pipeline transport agents can register for events.</span></span>
  
<span data-ttu-id="80247-145">**図 1 です。トランスポート イベント**</span><span class="sxs-lookup"><span data-stu-id="80247-145">**Figure 1. Transport events**</span></span>

![トランスポート パイプラインを介したメッセージ フロー、および各エージェントが登録できるイベントを示すイメージ。SmtpReceivedAgent の SMTP イベントから始まり、RoutingAgent の Categorizor イベント、そして最後に DeliveryAgent の配信イベントが続きます。](media/TAConceptsFig1.png)
  
<span data-ttu-id="80247-147">メッセージがトランスポート パイプラインに入る、 [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)クラスから派生したトランスポート エージェントは、任意のエージェントが登録されている SMTP イベントの中にメッセージで動作できます。</span><span class="sxs-lookup"><span data-stu-id="80247-147">When a message enters the transport pipeline, a transport agent derived from the [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) class can act on the message during any of the SMTP events that the agent registered for.</span></span> <span data-ttu-id="80247-148">[RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)クラスから派生したエージェントの登録されている 4 つのカテゴライザー イベントのいずれかで動作します。</span><span class="sxs-lookup"><span data-stu-id="80247-148">An agent derived from the [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) class can act on any of the four categorizer events that it has registered for.</span></span> <span data-ttu-id="80247-149">[DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)クラスから派生したエージェントは、メッセージの配信イベントを登録したことのいずれかの中に動作できます。</span><span class="sxs-lookup"><span data-stu-id="80247-149">An agent derived from the [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) class can act on a message during any of the delivery events that it has registered for.</span></span> 
  
## <a name="transport-agents-and-server-roles"></a><span data-ttu-id="80247-150">トランスポート エージェントとサーバーの役割</span><span class="sxs-lookup"><span data-stu-id="80247-150">Transport agents and server roles</span></span>
<span data-ttu-id="80247-151"><a name="ServerRoles"> </a></span><span class="sxs-lookup"><span data-stu-id="80247-151"></span></span>

<span data-ttu-id="80247-152">サーバーの役割のアーキテクチャを変更 Exchange 2013 に影響を与えるトランスポート エージェントおよびトランスポート エージェントが行うことができます。</span><span class="sxs-lookup"><span data-stu-id="80247-152">Changes to the server role architecture in Exchange 2013 affect transport agents and what your transport agents can do.</span></span> <span data-ttu-id="80247-153">Exchange 2013 には、次のサーバーの役割が含まれています。</span><span class="sxs-lookup"><span data-stu-id="80247-153">Exchange 2013 includes the following server roles:</span></span>
  
- <span data-ttu-id="80247-154">メールボックス サーバーなどを含むクライアント アクセス プロトコル、トランスポート サービス、メールボックス データベース、およびユニファイド メッセージングのコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="80247-154">Mailbox server — Includes Client Access protocols, the Transport service, mailbox databases, and Unified Messaging components.</span></span> <span data-ttu-id="80247-155">メールボックス サーバーは、Active Directory ドメイン サービス (AD DS)、クライアント アクセス サーバー、および Outlook などのメール クライアントと直接通信します。</span><span class="sxs-lookup"><span data-stu-id="80247-155">The Mailbox server communicates directly with Active Directory Domain Services (AD DS), Client Access servers, and mail clients such as Outlook.</span></span>
    
- <span data-ttu-id="80247-156">クライアント アクセス サーバー: 認証、制限付きリダイレクト、プロキシ サービス、およびクライアント アクセス プロトコル (HTTP、POP、IMAP、SMTP など) を提供します。</span><span class="sxs-lookup"><span data-stu-id="80247-156">Client Access server — Provides authentication, limited redirection, proxy services, and client access protocols such as HTTP, POP, IMAP, and SMTP.</span></span>
    
- <span data-ttu-id="80247-p111">エッジ トランスポート サーバー: 電子メールを組織の内外にルーティングします。エッジ トランスポート サーバーは、通常、Exchange トポロジの境界に配置されます。</span><span class="sxs-lookup"><span data-stu-id="80247-p111">Edge Transport server — Routes email into and out of an organization. Edge Transport servers typically sit at the perimeter of an Exchange topology.</span></span>
    
<span data-ttu-id="80247-159">この統合の構造体には、Exchange 2013 環境内に展開する必要のあるサーバーの数が減少します。</span><span class="sxs-lookup"><span data-stu-id="80247-159">This consolidated structure reduces the number of servers that need to be deployed in an Exchange 2013 environment.</span></span> <span data-ttu-id="80247-160">管理者が不要になったが、メールボックス サーバーを含むすべての Active Directory サイト内のハブ トランスポート サーバーとクライアント アクセス サーバーを展開して、新しい機能を利用するためにすべてのサーバー ロールを更新する必要がなくなりました。</span><span class="sxs-lookup"><span data-stu-id="80247-160">Administrators no longer have to deploy Hub Transport and Client Access servers in every Active Directory site that includes a Mailbox server, and they no longer need to update all server roles in order to take advantage of new functionality.</span></span>
  
<span data-ttu-id="80247-161">これらの変更をサーバーの役割のアーキテクチャに影響を与える可能性、パイプライン内のエージェント イベントに応答できます。</span><span class="sxs-lookup"><span data-stu-id="80247-161">These changes to the server role architecture can potentially affect where in the pipeline your agent can respond to events.</span></span> <span data-ttu-id="80247-162">Exchange 2013 より前のバージョンの Exchange のトランスポート エージェントを作成した場合、エージェントを変更する必要があるかどうかを判断するのにはアーキテクチャの変更を確認することを確認します。</span><span class="sxs-lookup"><span data-stu-id="80247-162">If you have created transport agents for versions of Exchange earlier than Exchange 2013, be sure to review the architectural changes to determine whether you need to make any changes to your agents.</span></span>
  
<span data-ttu-id="80247-p114">次の図は、Exchange 2013 のアーキテクチャ上の変更点が、どのようにトランスポート パイプラインを合理化および統合化しているかについて示しています。この図では、クライアント アクセス サーバーに「CAS」というラベルが付けられています。また、メールボックス サーバーには「MBX」というラベルが付けられています。</span><span class="sxs-lookup"><span data-stu-id="80247-p114">The following figure shows how the architectural changes in Exchange 2013 result in a streamlined, consolidated transport pipeline. In this figure, Client Access servers are labeled CAS. And Mailbox servers are labeled MBX.</span></span>
  
<span data-ttu-id="80247-166">**図 2 になります。Exchange 2013 サーバーの役割のアーキテクチャ**</span><span class="sxs-lookup"><span data-stu-id="80247-166">**Figure 2. Exchange 2013 server role architecture**</span></span>

![外部のファイアウォールを通過するクライアント トラフィックを示すイメージ。左側にはレイヤー 4 の負荷分散から統合 CAS 配列にトラフィックを渡すエッジ トランスポートがあり、右側にはデータベース アクセシビリティ グループの一連のメールボックス サーバーがあります。](media/Transport_Agent_Concepts_Fig_3.png)
  
<span data-ttu-id="80247-168">次の図では、Exchange 2013 サーバーの役割間の相互作用を示します。</span><span class="sxs-lookup"><span data-stu-id="80247-168">The following figure shows the interactions between the Exchange 2013 server roles.</span></span>
  
<span data-ttu-id="80247-169">**図 3 です。メールボックスおよびクライアント アクセス サーバー間のやり取り**</span><span class="sxs-lookup"><span data-stu-id="80247-169">**Figure 3. Mailbox and Client Access server interactions**</span></span>

![CAS に 4 つのターゲット (IIS/HTTP Proxy、POP/IMAP、SMTP、および UM) が存在するレイヤー 4 の負荷分散を通過するクライアント トラフィックから矢印が始まるやり取りを示すイメージ。矢印は、メールボックス ストアのコンプリメンタリ ターゲットを通過します。](media/Transport_Agent_Concepts_Fig_4.png)
  
<span data-ttu-id="80247-172">Exchange 2013 サーバーの役割のアーキテクチャの変更の詳細については、 [what ' s New Exchange 2013](http://technet.microsoft.com/ja-jp/library/jj150540%28v=exchg.150%29.aspx)では、 [Exchange 2013 のアーキテクチャ](http://technet.microsoft.com/ja-jp/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="80247-172">For more information about changes in the Exchange 2013 server role architecture, see [Exchange 2013 architecture](http://technet.microsoft.com/ja-jp/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) in [What's New in Exchange 2013](http://technet.microsoft.com/ja-jp/library/jj150540%28v=exchg.150%29.aspx).</span></span> 
  
## <a name="transport-agent-classes"></a><span data-ttu-id="80247-173">トランスポート エージェントのクラス</span><span class="sxs-lookup"><span data-stu-id="80247-173">Transport agent classes</span></span>
<span data-ttu-id="80247-174"><a name="Create"> </a></span><span class="sxs-lookup"><span data-stu-id="80247-174"></span></span>

<span data-ttu-id="80247-p116">カスタムのトランスポート エージェントの派生元クラスにより、そのエージェントで登録できるイベントが決まります。通常、カスタムのエージェントには、1 つのエージェント クラス、1 つのエージェント ファクトリ、1 つ以上のイベント ハンドラー、およびエージェントで処理するアクションを実行するコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="80247-p116">The class your transport agent derives from determines the events for which your agent can register. Your agent will typically contain an agent class, an agent factory, one or more event handlers, and the code that performs the actions that you want your agent to take.</span></span>
  
<span data-ttu-id="80247-177">次の表は、それぞれのエージェントの種類の派生元になるクラスを示しています。</span><span class="sxs-lookup"><span data-stu-id="80247-177">The following table lists the classes from which to derive for each agent type.</span></span>
  
<span data-ttu-id="80247-178">**表 2 になります。エージェント クラス**</span><span class="sxs-lookup"><span data-stu-id="80247-178">**Table 2. Agent classes**</span></span>

||||
|:-----|:-----|:-----|
|<span data-ttu-id="80247-179">エージェントの種類</span><span class="sxs-lookup"><span data-stu-id="80247-179">Agent type</span></span>  <br/> |<span data-ttu-id="80247-180">ファクトリの基底クラス</span><span class="sxs-lookup"><span data-stu-id="80247-180">Factory base class</span></span>  <br/> |<span data-ttu-id="80247-181">エージェントの基底クラス</span><span class="sxs-lookup"><span data-stu-id="80247-181">Agent base class</span></span>  <br/> |
|<span data-ttu-id="80247-182">SMTP の受信</span><span class="sxs-lookup"><span data-stu-id="80247-182">SMTP receive</span></span>  <br/> |[<span data-ttu-id="80247-183">SmtpReceiveAgentFactory</span><span class="sxs-lookup"><span data-stu-id="80247-183">SmtpReceiveAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgentFactory.aspx) <br/> |[<span data-ttu-id="80247-184">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="80247-184">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="80247-185">ルーティング</span><span class="sxs-lookup"><span data-stu-id="80247-185">Routing</span></span>  <br/> |[<span data-ttu-id="80247-186">RoutingAgentFactory</span><span class="sxs-lookup"><span data-stu-id="80247-186">RoutingAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgentFactory.aspx) <br/> |[<span data-ttu-id="80247-187">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="80247-187">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> |
|<span data-ttu-id="80247-188">配信</span><span class="sxs-lookup"><span data-stu-id="80247-188">Delivery</span></span>  <br/> |[<span data-ttu-id="80247-189">DeliveryAgentFactory\<マネージャー\></span><span class="sxs-lookup"><span data-stu-id="80247-189">DeliveryAgentFactory\<Manager\></span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgentFactory`1.aspx) <br/> |[<span data-ttu-id="80247-190">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="80247-190">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
   
<span data-ttu-id="80247-191">これらのファクトリとエージェントの基本クラスは、プロパティとイベントのトランスポートとメッセージにアクセスするために使用できるメソッドを提供します。</span><span class="sxs-lookup"><span data-stu-id="80247-191">These factory and agent base classes provide properties and methods that you can use to access transport events and messages.</span></span> <span data-ttu-id="80247-192">これらのクラスから継承する、エージェントでは、クラスを実装します。</span><span class="sxs-lookup"><span data-stu-id="80247-192">Implement classes in your agent that inherit from these classes.</span></span> <span data-ttu-id="80247-193">エージェント ファクトリの派生クラスで、エージェント クラスの新しいインスタンスを返すことができるように、 **CreateAgent**メソッドをオーバーライドします。</span><span class="sxs-lookup"><span data-stu-id="80247-193">In the agent factory derived class, override the **CreateAgent** method so that it returns a new instance of your agent class.</span></span> 
  
<span data-ttu-id="80247-194">イベントに渡される引数は、プロパティと、基になるメッセージの内容を変更するのにを使用することができる[なか](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx)クラスのインスタンスを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="80247-194">Arguments passed to the events can contain an instance of the [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) class, which you can use to change the properties and contents of the underlying message.</span></span> <span data-ttu-id="80247-195">メッセージのすべての情報は、各イベントで使用できます。</span><span class="sxs-lookup"><span data-stu-id="80247-195">Not all message information is available in each event.</span></span> <span data-ttu-id="80247-196">どのエージェントを決定する必要があり、どのイベントが実行するタスクに最適です。</span><span class="sxs-lookup"><span data-stu-id="80247-196">You must determine which agent and which event is best for the task you want to accomplish.</span></span> 
  
<span data-ttu-id="80247-197">次に示す名前空間には、トランスポート パイプライン内のメッセージを読み取り、書き込み、および変更するために使用できる型が含まれています。</span><span class="sxs-lookup"><span data-stu-id="80247-197">The following namespaces contain types that you can use to read, write, and modify messages in the transport pipeline:</span></span>
  
- [<span data-ttu-id="80247-198">Microsoft.Exchange.Data.Mime.Encoders</span><span class="sxs-lookup"><span data-stu-id="80247-198">Microsoft.Exchange.Data.Mime.Encoders</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.Encoders.aspx)
    
- [<span data-ttu-id="80247-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span><span class="sxs-lookup"><span data-stu-id="80247-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.iCalendar.aspx)
    
- [<span data-ttu-id="80247-200">Microsoft.Exchange.Data.Mime</span><span class="sxs-lookup"><span data-stu-id="80247-200">Microsoft.Exchange.Data.Mime</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.aspx)
    
- [<span data-ttu-id="80247-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span><span class="sxs-lookup"><span data-stu-id="80247-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.Tnef.aspx)
    
- [<span data-ttu-id="80247-202">Microsoft.Exchange.Data.ContentTypes.vCard</span><span class="sxs-lookup"><span data-stu-id="80247-202">Microsoft.Exchange.Data.ContentTypes.vCard</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.vCard.aspx)
    
<span data-ttu-id="80247-203">後[インストールしエージェントを管理する](http://technet.microsoft.com/ja-jp/library/bb125175%28v=exchg.150%29.aspx)Exchange 管理シェルを使用して、トランスポート エージェントを作成します。</span><span class="sxs-lookup"><span data-stu-id="80247-203">After you write your transport agent, you [install and manage your agent](http://technet.microsoft.com/ja-jp/library/bb125175%28v=exchg.150%29.aspx) by using the Exchange Management Shell.</span></span> <span data-ttu-id="80247-204">詳細については、 [Exchange 2013 のトランスポート エージェントを作成する](creating-transport-agents-for-exchange-2013.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="80247-204">For more information, see [Creating transport agents for Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="80247-205">関連項目</span><span class="sxs-lookup"><span data-stu-id="80247-205">See also</span></span>

- [<span data-ttu-id="80247-206">Exchange のトランスポート エージェント</span><span class="sxs-lookup"><span data-stu-id="80247-206">Transport agents in Exchange</span></span>](transport-agents-in-exchange-2013.md)    
- [<span data-ttu-id="80247-207">Exchange 2013 のトランスポート エージェントのリファレンス</span><span class="sxs-lookup"><span data-stu-id="80247-207">Transport agent reference for Exchange 2013</span></span>](transport-agent-reference-for-exchange-2013.md)   
- [<span data-ttu-id="80247-208">読み取りおよび Exchange 2013 のトランスポート パイプライン内のメッセージを変更します。</span><span class="sxs-lookup"><span data-stu-id="80247-208">Reading and modifying messages in the Exchange 2013 transport pipeline</span></span>](reading-and-modifying-messages-in-the-exchange-2013-transport-pipeline.md)    
- [<span data-ttu-id="80247-209">Exchange 2013 の新機能</span><span class="sxs-lookup"><span data-stu-id="80247-209">What's New in Exchange 2013</span></span>](http://technet.microsoft.com/ja-jp/library/jj150540%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="80247-210">Exchange 2013 サーバーの役割のアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="80247-210">Exchange 2013 Server Role Architecture</span></span>](http://blogs.technet.com/b/exchange/archive/2013/01/23/exchange-2013-server-role-architecture.aspx)    
- [<span data-ttu-id="80247-211">メールボックスおよびクライアント アクセス サーバー</span><span class="sxs-lookup"><span data-stu-id="80247-211">Mailbox and Client Access Servers</span></span>](http://technet.microsoft.com/ja-jp/library/jj150519%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="80247-212">Exchange Server 2013 のメールの流れ</span><span class="sxs-lookup"><span data-stu-id="80247-212">Exchange Server 2013 Mail Flow</span></span>](http://technet.microsoft.com/ja-jp/library/aa996349.aspx)
- [<span data-ttu-id="80247-213">Exchange Server 2013年のメールのルーティング</span><span class="sxs-lookup"><span data-stu-id="80247-213">Exchange Server 2013 Mail Routing</span></span>](http://technet.microsoft.com/ja-jp/library/aa998825%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="80247-214">Exchange Server PowerShell (Exchange 管理シェル)</span><span class="sxs-lookup"><span data-stu-id="80247-214">Exchange Server PowerShell (Exchange Management Shell)</span></span>](https://docs.microsoft.com/ja-jp/powershell/exchange/exchange-server/exchange-management-shell?view=exchange-ps)
    

