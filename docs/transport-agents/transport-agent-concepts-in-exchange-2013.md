---
title: Exchange 2013 におけるトランスポート エージェントの概念
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 0c700af8-2792-4d3f-8571-8860e0550d8e
description: Exchange 2013 のトランスポートエージェントパイプラインおよびサーバーの役割のアーキテクチャがトランスポートエージェントの開発に及ぼす影響、およびトランスポートエージェントの開発に使用できるクラスについて説明します。
ms.openlocfilehash: b9552ea4398ac8135a11b48eb7e7bdf5ec81985e
ms.sourcegitcommit: 88ec988f2bb67c1866d06b361615f3674a24e795
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/03/2020
ms.locfileid: "44527559"
---
# <a name="transport-agent-concepts-in-exchange-2013"></a><span data-ttu-id="73e20-103">Exchange 2013 におけるトランスポート エージェントの概念</span><span class="sxs-lookup"><span data-stu-id="73e20-103">Transport agent concepts in Exchange 2013</span></span>

<span data-ttu-id="73e20-104">Exchange 2013 のトランスポートエージェントパイプラインおよびサーバーの役割のアーキテクチャがトランスポートエージェントの開発に及ぼす影響、およびトランスポートエージェントの開発に使用できるクラスについて説明します。</span><span class="sxs-lookup"><span data-stu-id="73e20-104">Find information about how the transport agent pipeline and server role architecture in Exchange 2013 affect transport agent development, and the classes that you can use to develop transport agents.</span></span> 
  
<span data-ttu-id="73e20-105">**製品:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="73e20-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="73e20-106">Exchange Server 2013 で提供されるクラスライブラリを使用して、イベントを登録し、トランスポートパイプラインを通過するメッセージに対してアクションを実行するトランスポートエージェントを実装できます。</span><span class="sxs-lookup"><span data-stu-id="73e20-106">You can use the class library provided in Exchange Server 2013 to implement transport agents that register for events and take actions on messages as they pass through the transport pipeline.</span></span> <span data-ttu-id="73e20-107">また、メッセージの変更とコンテンツの変換にも、トランスポート エージェントを使用できます。</span><span class="sxs-lookup"><span data-stu-id="73e20-107">You can also use transport agents to modify messages and convert content.</span></span> 
  
<span data-ttu-id="73e20-108">この記事では、トランスポートエージェントとトランスポートパイプラインのアーキテクチャについて説明します。</span><span class="sxs-lookup"><span data-stu-id="73e20-108">This article provides information about transport agents and the transport pipeline architecture.</span></span> <span data-ttu-id="73e20-109">トランスポート動作を変更して組織のニーズを満たすことができるように、トランスポートパイプラインのアーキテクチャを理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="73e20-109">It is important to understand the architecture of the transport pipeline so that you can modify transport behavior to meet your organization's needs.</span></span> <span data-ttu-id="73e20-110">この記事では、トランスポートエージェントとトランスポートエージェントの開発に使用できるクラスに影響する Exchange 2013 アーキテクチャの変更についても説明します。</span><span class="sxs-lookup"><span data-stu-id="73e20-110">This article also provides information about changes in the Exchange 2013 architecture that affect transport agents and the classes that you can use to develop transport agents.</span></span> 
  
## <a name="transport-agents-in-the-transport-pipeline"></a><span data-ttu-id="73e20-111">トランスポート パイプライン内のトランスポート エージェント</span><span class="sxs-lookup"><span data-stu-id="73e20-111">Transport agents in the transport pipeline</span></span>
<span data-ttu-id="73e20-112"><a name="Pipeline"> </a></span><span class="sxs-lookup"><span data-stu-id="73e20-112"><a name="Pipeline"> </a></span></span>

<span data-ttu-id="73e20-113">トランスポート エージェントは、次に示す 3 つのクラスのいずれかから派生します。</span><span class="sxs-lookup"><span data-stu-id="73e20-113">Transport agents are derived from one of the following three classes:</span></span>
  
- [<span data-ttu-id="73e20-114">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-114">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)
- [<span data-ttu-id="73e20-115">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-115">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)
- [<span data-ttu-id="73e20-116">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-116">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)
    
<span data-ttu-id="73e20-p103">トランスポート パイプラインとは、Exchange 2013 組織の境界内でのメッセージ データの流れのことを意味します。パイプラインは、次の表に示したサービスによって成立します。</span><span class="sxs-lookup"><span data-stu-id="73e20-p103">The transport pipeline refers to the flow of message data within the boundaries of an Exchange 2013 organization. The pipeline consists of the services listed in the following table.</span></span>
  
<span data-ttu-id="73e20-119">**表1トランスポートパイプラインサービス**</span><span class="sxs-lookup"><span data-stu-id="73e20-119">**Table 1. Transport pipeline services**</span></span>

|<span data-ttu-id="73e20-120">**サービス**</span><span class="sxs-lookup"><span data-stu-id="73e20-120">**Service**</span></span>|<span data-ttu-id="73e20-121">**説明**</span><span class="sxs-lookup"><span data-stu-id="73e20-121">**Description**</span></span>|<span data-ttu-id="73e20-122">**サポートされるクラス**</span><span class="sxs-lookup"><span data-stu-id="73e20-122">**Classes supported**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="73e20-123">フロント エンド トランスポート</span><span class="sxs-lookup"><span data-stu-id="73e20-123">Front End Transport</span></span>  <br/> |<span data-ttu-id="73e20-124">すべての[クライアントアクセスサーバー](https://technet.microsoft.com/library/dd298114%28v=exchg.150%29.aspx)上で実行され、Exchange 2013 組織のすべての受信および送信外部 SMTP トラフィックのステートレスプロキシとして機能します。</span><span class="sxs-lookup"><span data-stu-id="73e20-124">Runs on all [Client Access servers](https://technet.microsoft.com/library/dd298114%28v=exchg.150%29.aspx) and acts as a stateless proxy for all inbound and outbound external SMTP traffic for the Exchange 2013 organization.</span></span> <span data-ttu-id="73e20-125">フロント エンド トランスポート サービスは、メッセージ コンテンツを検査することも、メッセージをローカルにキューに格納することもありません。</span><span class="sxs-lookup"><span data-stu-id="73e20-125">The Front End Transport service doesn't inspect message content or queue any messages locally.</span></span> <span data-ttu-id="73e20-126">[メールボックスサーバー](https://technet.microsoft.com/library/jj150491%28v=exchg.150%29.aspx)上のトランスポートサービスと通信します。</span><span class="sxs-lookup"><span data-stu-id="73e20-126">It communicates with the Transport service on a [Mailbox server](https://technet.microsoft.com/library/jj150491%28v=exchg.150%29.aspx).</span></span>  <br/> |[<span data-ttu-id="73e20-127">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-127">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="73e20-128">Transport</span><span class="sxs-lookup"><span data-stu-id="73e20-128">Transport</span></span>  <br/> |<span data-ttu-id="73e20-129">すべてのメールボックスサーバー上で実行され、Exchange Server 2010 の[ハブトランスポートサーバー](https://technet.microsoft.com/library/bb123494%28v=exchg.141%29.aspx)の役割に似ています。</span><span class="sxs-lookup"><span data-stu-id="73e20-129">Runs on all Mailbox servers and is similar to the [Hub Transport server](https://technet.microsoft.com/library/bb123494%28v=exchg.141%29.aspx) role in Exchange Server 2010.</span></span> <span data-ttu-id="73e20-130">トランスポートサービスは、メールボックストランスポートサービスとフロントエンドトランスポートサービスの間でメッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="73e20-130">The Transport service routes messages between itself and the Mailbox Transport and Front End Transport services.</span></span> <span data-ttu-id="73e20-131">このサービスは、メールボックスデータベースと直接通信しません。</span><span class="sxs-lookup"><span data-stu-id="73e20-131">This service does not communicate directly with mailbox databases.</span></span>  <br/> |[<span data-ttu-id="73e20-132">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-132">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> [<span data-ttu-id="73e20-133">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-133">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> [<span data-ttu-id="73e20-134">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-134">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
|<span data-ttu-id="73e20-135">メールボックス トランスポート</span><span class="sxs-lookup"><span data-stu-id="73e20-135">Mailbox Transport</span></span>  <br/> |<span data-ttu-id="73e20-136">すべてのメールボックスサーバー上で実行され、メールボックストランスポート発信とメールボックストランスポート配信という2つの個別のサービスで構成されます。</span><span class="sxs-lookup"><span data-stu-id="73e20-136">Runs on all Mailbox servers and consists of two separate services: Mailbox Transport Submission and Mailbox Transport Delivery.</span></span> <span data-ttu-id="73e20-137">メールボックストランスポート配信は、トランスポートサービスから SMTP メッセージを受信し、Exchange リモートプロシージャコール (RPC) を使用してメッセージを配信することによって、メールボックスデータベースに接続します。</span><span class="sxs-lookup"><span data-stu-id="73e20-137">Mailbox Transport Delivery receives SMTP messages from the Transport service, and connects to the mailbox database by using an Exchange remote procedure call (RPC) to deliver the message.</span></span> <span data-ttu-id="73e20-138">メールボックストランスポート発信は、メッセージを取得するために RPC を使用してメールボックスデータベースに接続し、SMTP を介してトランスポートサービスにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="73e20-138">Mailbox Transport Submission connects to the mailbox database using RPC to retrieve messages, and submits the messages via SMTP to the Transport service.</span></span>  <br/> |<span data-ttu-id="73e20-139">なし。</span><span class="sxs-lookup"><span data-stu-id="73e20-139">None.</span></span>  <br/> |
   
### <a name="transport-events"></a><span data-ttu-id="73e20-140">トランスポート イベント</span><span class="sxs-lookup"><span data-stu-id="73e20-140">Transport events</span></span>
<span data-ttu-id="73e20-141"><a name="Events"> </a></span><span class="sxs-lookup"><span data-stu-id="73e20-141"><a name="Events"> </a></span></span>

<span data-ttu-id="73e20-p107">トランスポート エージェントは、まずイベントを登録して、そのイベントが発生したときにアクションを起こすことで実装します。3 種類のそれぞれのエージェントで、異なるイベントのセットを登録できます。</span><span class="sxs-lookup"><span data-stu-id="73e20-p107">You implement transport agents by first registering for an event, and then taking an action when that event fires. Each of the three agent types can register for a different set of events.</span></span>
  
<span data-ttu-id="73e20-144">次の図は、トランスポート エージェントがトランスポート パイプラインのどの部分でイベントを登録できるかを示しています。</span><span class="sxs-lookup"><span data-stu-id="73e20-144">The following figure shows where in the transport pipeline transport agents can register for events.</span></span>
  
<span data-ttu-id="73e20-145">**図1。トランスポートイベント**</span><span class="sxs-lookup"><span data-stu-id="73e20-145">**Figure 1. Transport events**</span></span>

![トランスポート パイプラインを介したメッセージ フロー、および各エージェントが登録できるイベントを示すイメージ。SmtpReceivedAgent の SMTP イベントから始まり、RoutingAgent の Categorizor イベント、そして最後に DeliveryAgent の配信イベントが続きます。](media/TAConceptsFig1.png)
  
<span data-ttu-id="73e20-147">メッセージがトランスポートパイプラインに入ると、 [Smtpreceiveagent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)クラスから派生したトランスポートエージェントは、エージェントが登録した SMTP イベントの中でメッセージを処理することができます。</span><span class="sxs-lookup"><span data-stu-id="73e20-147">When a message enters the transport pipeline, a transport agent derived from the [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) class can act on the message during any of the SMTP events that the agent registered for.</span></span> <span data-ttu-id="73e20-148">[Routingagent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)クラスから派生したエージェントは、に登録されている4つのカテゴライザーイベントのいずれかに対して動作できます。</span><span class="sxs-lookup"><span data-stu-id="73e20-148">An agent derived from the [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) class can act on any of the four categorizer events that it has registered for.</span></span> <span data-ttu-id="73e20-149">[Deliveryagent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)クラスから派生したエージェントは、に登録されている配信イベントのいずれかでメッセージを処理できます。</span><span class="sxs-lookup"><span data-stu-id="73e20-149">An agent derived from the [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) class can act on a message during any of the delivery events that it has registered for.</span></span> 
  
## <a name="transport-agents-and-server-roles"></a><span data-ttu-id="73e20-150">トランスポート エージェントとサーバーの役割</span><span class="sxs-lookup"><span data-stu-id="73e20-150">Transport agents and server roles</span></span>
<span data-ttu-id="73e20-151"><a name="ServerRoles"> </a></span><span class="sxs-lookup"><span data-stu-id="73e20-151"><a name="ServerRoles"> </a></span></span>

<span data-ttu-id="73e20-152">Exchange 2013 のサーバーの役割のアーキテクチャに対する変更は、トランスポートエージェントとトランスポートエージェントが実行できることに影響します。</span><span class="sxs-lookup"><span data-stu-id="73e20-152">Changes to the server role architecture in Exchange 2013 affect transport agents and what your transport agents can do.</span></span> <span data-ttu-id="73e20-153">Exchange 2013 には、次のサーバーの役割が含まれています。</span><span class="sxs-lookup"><span data-stu-id="73e20-153">Exchange 2013 includes the following server roles:</span></span>
  
- <span data-ttu-id="73e20-154">メールボックス サーバー: クライアント アクセス プロトコル、トランスポート サービス、メールボックス データベース、ユニファイド メッセージング コンポーネントが含まれます。</span><span class="sxs-lookup"><span data-stu-id="73e20-154">Mailbox server — Includes Client Access protocols, the Transport service, mailbox databases, and Unified Messaging components.</span></span> <span data-ttu-id="73e20-155">メールボックス サーバーは、Active Directory ドメイン サービス (AD DS)、クライアント アクセス サーバー、および Outlook などのメール クライアントと直接通信します。</span><span class="sxs-lookup"><span data-stu-id="73e20-155">The Mailbox server communicates directly with Active Directory Domain Services (AD DS), Client Access servers, and mail clients such as Outlook.</span></span>
    
- <span data-ttu-id="73e20-156">クライアント アクセス サーバー: 認証、制限付きリダイレクト、プロキシ サービス、およびクライアント アクセス プロトコル (HTTP、POP、IMAP、SMTP など) を提供します。</span><span class="sxs-lookup"><span data-stu-id="73e20-156">Client Access server — Provides authentication, limited redirection, proxy services, and client access protocols such as HTTP, POP, IMAP, and SMTP.</span></span>
    
- <span data-ttu-id="73e20-p111">エッジ トランスポート サーバー: 電子メールを組織の内外にルーティングします。エッジ トランスポート サーバーは、通常、Exchange トポロジの境界に配置されます。</span><span class="sxs-lookup"><span data-stu-id="73e20-p111">Edge Transport server — Routes email into and out of an organization. Edge Transport servers typically sit at the perimeter of an Exchange topology.</span></span>
    
<span data-ttu-id="73e20-159">この統合構造を使用すると、Exchange 2013 環境に展開する必要があるサーバーの数を減らすことができます。</span><span class="sxs-lookup"><span data-stu-id="73e20-159">This consolidated structure reduces the number of servers that need to be deployed in an Exchange 2013 environment.</span></span> <span data-ttu-id="73e20-160">管理者は、メールボックスサーバーを含むすべての Active Directory サイトにハブトランスポートサーバーとクライアントアクセスサーバーを展開する必要がなくなり、新しい機能を利用するためにすべてのサーバーの役割を更新する必要がなくなりました。</span><span class="sxs-lookup"><span data-stu-id="73e20-160">Administrators no longer have to deploy Hub Transport and Client Access servers in every Active Directory site that includes a Mailbox server, and they no longer need to update all server roles in order to take advantage of new functionality.</span></span>
  
<span data-ttu-id="73e20-161">このようなサーバーの役割アーキテクチャに対する変更は、カスタムのエージェントがパイプラインのどの部分でイベントに応答できるかに影響を及ぼす可能性があります。</span><span class="sxs-lookup"><span data-stu-id="73e20-161">These changes to the server role architecture can potentially affect where in the pipeline your agent can respond to events.</span></span> <span data-ttu-id="73e20-162">Exchange 2013 よりも前の Exchange の各バージョンに対応したトランスポート エージェントを作成してある場合は、アーキテクチャの変更点を確認して、カスタムのエージェントに変更を加える必要があるかどうかを判断してください。</span><span class="sxs-lookup"><span data-stu-id="73e20-162">If you have created transport agents for versions of Exchange earlier than Exchange 2013, be sure to review the architectural changes to determine whether you need to make any changes to your agents.</span></span>
  
<span data-ttu-id="73e20-p114">次の図は、Exchange 2013 のアーキテクチャ上の変更点が、どのようにトランスポート パイプラインを合理化および統合化しているかについて示しています。この図では、クライアント アクセス サーバーに「CAS」というラベルが付けられています。また、メールボックス サーバーには「MBX」というラベルが付けられています。</span><span class="sxs-lookup"><span data-stu-id="73e20-p114">The following figure shows how the architectural changes in Exchange 2013 result in a streamlined, consolidated transport pipeline. In this figure, Client Access servers are labeled CAS. And Mailbox servers are labeled MBX.</span></span>
  
<span data-ttu-id="73e20-166">**図2Exchange 2013 のサーバーの役割のアーキテクチャ**</span><span class="sxs-lookup"><span data-stu-id="73e20-166">**Figure 2. Exchange 2013 server role architecture**</span></span>

![外部のファイアウォールを通過するクライアント トラフィックを示すイメージ。左側にはレイヤー 4 の負荷分散から統合 CAS 配列にトラフィックを渡すエッジ トランスポートがあり、右側にはデータベース アクセシビリティ グループの一連のメールボックス サーバーがあります。](media/Transport_Agent_Concepts_Fig_3.png)
  
<span data-ttu-id="73e20-168">次の図は、Exchange 2013 のサーバーの役割間での相互作用を示しています。</span><span class="sxs-lookup"><span data-stu-id="73e20-168">The following figure shows the interactions between the Exchange 2013 server roles.</span></span>
  
<span data-ttu-id="73e20-169">**図3メールボックスおよびクライアントアクセスサーバーの相互作用**</span><span class="sxs-lookup"><span data-stu-id="73e20-169">**Figure 3. Mailbox and Client Access server interactions**</span></span>

![CAS に 4 つのターゲット (IIS/HTTP Proxy、POP/IMAP、SMTP、および UM) が存在するレイヤー 4 の負荷分散を通過するクライアント トラフィックから矢印が始まるやり取りを示すイメージ。矢印は、メールボックス ストアのコンプリメンタリ ターゲットを通過します。](media/Transport_Agent_Concepts_Fig_4.png)
  
<span data-ttu-id="73e20-172">Exchange 2013 サーバーの役割アーキテクチャの変更の詳細については、「exchange [2013 の新機能](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx)」の「 [exchange 2013 アーキテクチャ](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="73e20-172">For more information about changes in the Exchange 2013 server role architecture, see [Exchange 2013 architecture](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) in [What's New in Exchange 2013](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx).</span></span> 
  
## <a name="transport-agent-classes"></a><span data-ttu-id="73e20-173">トランスポート エージェントのクラス</span><span class="sxs-lookup"><span data-stu-id="73e20-173">Transport agent classes</span></span>
<span data-ttu-id="73e20-174"><a name="Create"> </a></span><span class="sxs-lookup"><span data-stu-id="73e20-174"><a name="Create"> </a></span></span>

<span data-ttu-id="73e20-p116">カスタムのトランスポート エージェントの派生元クラスにより、そのエージェントで登録できるイベントが決まります。通常、カスタムのエージェントには、1 つのエージェント クラス、1 つのエージェント ファクトリ、1 つ以上のイベント ハンドラー、およびエージェントで処理するアクションを実行するコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="73e20-p116">The class your transport agent derives from determines the events for which your agent can register. Your agent will typically contain an agent class, an agent factory, one or more event handlers, and the code that performs the actions that you want your agent to take.</span></span>
  
<span data-ttu-id="73e20-177">次の表は、それぞれのエージェントの種類の派生元になるクラスを示しています。</span><span class="sxs-lookup"><span data-stu-id="73e20-177">The following table lists the classes from which to derive for each agent type.</span></span>
  
<span data-ttu-id="73e20-178">**表2エージェントクラス**</span><span class="sxs-lookup"><span data-stu-id="73e20-178">**Table 2. Agent classes**</span></span>

||||
|:-----|:-----|:-----|
|<span data-ttu-id="73e20-179">エージェントの種類</span><span class="sxs-lookup"><span data-stu-id="73e20-179">Agent type</span></span>  <br/> |<span data-ttu-id="73e20-180">ファクトリの基底クラス</span><span class="sxs-lookup"><span data-stu-id="73e20-180">Factory base class</span></span>  <br/> |<span data-ttu-id="73e20-181">エージェントの基底クラス</span><span class="sxs-lookup"><span data-stu-id="73e20-181">Agent base class</span></span>  <br/> |
|<span data-ttu-id="73e20-182">SMTP の受信</span><span class="sxs-lookup"><span data-stu-id="73e20-182">SMTP receive</span></span>  <br/> |[<span data-ttu-id="73e20-183">SmtpReceiveAgentFactory</span><span class="sxs-lookup"><span data-stu-id="73e20-183">SmtpReceiveAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgentFactory.aspx) <br/> |[<span data-ttu-id="73e20-184">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-184">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="73e20-185">承認</span><span class="sxs-lookup"><span data-stu-id="73e20-185">Routing</span></span>  <br/> |[<span data-ttu-id="73e20-186">RoutingAgentFactory</span><span class="sxs-lookup"><span data-stu-id="73e20-186">RoutingAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgentFactory.aspx) <br/> |[<span data-ttu-id="73e20-187">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="73e20-187">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> |
|<span data-ttu-id="73e20-188">Delivery</span><span class="sxs-lookup"><span data-stu-id="73e20-188">Delivery</span></span>  <br/> |<span data-ttu-id="73e20-189">[DeliveryAgentFactory\<Manager\>](https://msdn.microsoft.com/library/dd877550(v=exchg.150).aspx)</span><span class="sxs-lookup"><span data-stu-id="73e20-189">[DeliveryAgentFactory\<Manager\>](https://msdn.microsoft.com/library/dd877550(v=exchg.150).aspx)</span></span> <br/> |<span data-ttu-id="73e20-190">[DeliveryAgent](https://msdn.microsoft.com/library/microsoft.exchange.data.transport.delivery.deliveryagent(v=exchg.150).aspx)</span><span class="sxs-lookup"><span data-stu-id="73e20-190">[DeliveryAgent](https://msdn.microsoft.com/library/microsoft.exchange.data.transport.delivery.deliveryagent(v=exchg.150).aspx)</span></span> <br/> |
   
<span data-ttu-id="73e20-p117">これらのファクトリとエージェントの基底クラスには、トランスポート イベントとメッセージへのアクセスに使用できるプロパティとメソッドが用意されています。カスタムのエージェントには、これらのクラスから継承するクラスを実装します。エージェント ファクトリ派生クラスでは、**CreateAgent** メソッドをオーバーライドして、カスタムのエージェント クラスの新しいインスタンスを返すようにします。</span><span class="sxs-lookup"><span data-stu-id="73e20-p117">These factory and agent base classes provide properties and methods that you can use to access transport events and messages. Implement classes in your agent that inherit from these classes. In the agent factory derived class, override the **CreateAgent** method so that it returns a new instance of your agent class.</span></span> 
  
<span data-ttu-id="73e20-194">イベントに渡される引数には、[電子メールメッセージ](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx)クラスのインスタンスを含めることができます。これは、基になるメッセージのプロパティとコンテンツを変更するために使用できます。</span><span class="sxs-lookup"><span data-stu-id="73e20-194">Arguments passed to the events can contain an instance of the [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) class, which you can use to change the properties and contents of the underlying message.</span></span> <span data-ttu-id="73e20-195">すべてのメッセージ情報が、各イベントで使用できるわけではありません。</span><span class="sxs-lookup"><span data-stu-id="73e20-195">Not all message information is available in each event.</span></span> <span data-ttu-id="73e20-196">実行するタスクにとって最適なエージェントとイベントを判断する必要があります。</span><span class="sxs-lookup"><span data-stu-id="73e20-196">You must determine which agent and which event is best for the task you want to accomplish.</span></span> 
  
<span data-ttu-id="73e20-197">次に示す名前空間には、トランスポート パイプライン内のメッセージを読み取り、書き込み、および変更するために使用できる型が含まれています。</span><span class="sxs-lookup"><span data-stu-id="73e20-197">The following namespaces contain types that you can use to read, write, and modify messages in the transport pipeline:</span></span>
  
- [<span data-ttu-id="73e20-198">(データの場合)</span><span class="sxs-lookup"><span data-stu-id="73e20-198">Microsoft.Exchange.Data.Mime.Encoders</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.Encoders.aspx)
    
- [<span data-ttu-id="73e20-199">ContentTypes を行います。</span><span class="sxs-lookup"><span data-stu-id="73e20-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.iCalendar.aspx)
    
- [<span data-ttu-id="73e20-200">Microsoft. データの Mime</span><span class="sxs-lookup"><span data-stu-id="73e20-200">Microsoft.Exchange.Data.Mime</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.aspx)
    
- [<span data-ttu-id="73e20-201">ContentTypes (. Tnef)</span><span class="sxs-lookup"><span data-stu-id="73e20-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.Tnef.aspx)
    
- [<span data-ttu-id="73e20-202">ContentTypes (. vCard)</span><span class="sxs-lookup"><span data-stu-id="73e20-202">Microsoft.Exchange.Data.ContentTypes.vCard</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.vCard.aspx)
    
<span data-ttu-id="73e20-203">トランスポートエージェントを作成したら、Exchange 管理シェルを使用して[エージェントをインストールおよび管理](https://technet.microsoft.com/library/bb125175%28v=exchg.150%29.aspx)します。</span><span class="sxs-lookup"><span data-stu-id="73e20-203">After you write your transport agent, you [install and manage your agent](https://technet.microsoft.com/library/bb125175%28v=exchg.150%29.aspx) by using the Exchange Management Shell.</span></span> <span data-ttu-id="73e20-204">詳細については、「[Exchange 2013 のトランスポート エージェントの作成](creating-transport-agents-for-exchange-2013.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="73e20-204">For more information, see [Creating transport agents for Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="73e20-205">関連項目</span><span class="sxs-lookup"><span data-stu-id="73e20-205">See also</span></span>

- [<span data-ttu-id="73e20-206">Exchange のトランスポート エージェント</span><span class="sxs-lookup"><span data-stu-id="73e20-206">Transport agents in Exchange</span></span>](transport-agents-in-exchange-2013.md)    
- [<span data-ttu-id="73e20-207">Exchange 2013 のトランスポート エージェントのリファレンス</span><span class="sxs-lookup"><span data-stu-id="73e20-207">Transport agent reference for Exchange 2013</span></span>](transport-agent-reference-for-exchange-2013.md)   
- [<span data-ttu-id="73e20-208">Exchange 2013 トランスポート パイプライン内のメッセージの読み取りおよび変更</span><span class="sxs-lookup"><span data-stu-id="73e20-208">Reading and modifying messages in the Exchange 2013 transport pipeline</span></span>](reading-and-modifying-messages-in-the-exchange-2013-transport-pipeline.md)    
- [<span data-ttu-id="73e20-209">Exchange 2013 の新機能</span><span class="sxs-lookup"><span data-stu-id="73e20-209">What's New in Exchange 2013</span></span>](https://technet.microsoft.com/library/jj150540%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="73e20-210">Exchange 2013 のサーバーの役割のアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="73e20-210">Exchange 2013 Server Role Architecture</span></span>](https://blogs.technet.com/b/exchange/archive/2013/01/23/exchange-2013-server-role-architecture.aspx)    
- [<span data-ttu-id="73e20-211">メールボックスサーバーとクライアントアクセスサーバー</span><span class="sxs-lookup"><span data-stu-id="73e20-211">Mailbox and Client Access Servers</span></span>](https://technet.microsoft.com/library/jj150519%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="73e20-212">Exchange Server 2013 メールフロー</span><span class="sxs-lookup"><span data-stu-id="73e20-212">Exchange Server 2013 Mail Flow</span></span>](https://technet.microsoft.com/library/aa996349.aspx)
- [<span data-ttu-id="73e20-213">Exchange Server 2013 メールルーティング</span><span class="sxs-lookup"><span data-stu-id="73e20-213">Exchange Server 2013 Mail Routing</span></span>](https://technet.microsoft.com/library/aa998825%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="73e20-214">Exchange Server PowerShell (Exchange 管理シェル)</span><span class="sxs-lookup"><span data-stu-id="73e20-214">Exchange Server PowerShell (Exchange Management Shell)</span></span>](https://docs.microsoft.com/powershell/exchange/exchange-server/exchange-management-shell?view=exchange-ps)
    

