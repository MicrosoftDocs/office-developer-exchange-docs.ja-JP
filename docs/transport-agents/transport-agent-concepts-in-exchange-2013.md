---
title: Exchange 2013 におけるトランスポート エージェントの概念
manager: sethgros
ms.date: 09/17/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 0c700af8-2792-4d3f-8571-8860e0550d8e
description: トランスポート エージェントのパイプラインとサーバーの役割のアーキテクチャでは、Exchange 2013 に与える影響について、トランスポート エージェントの開発とトランスポート エージェントの開発に使用できるクラスについての情報を検索します。
ms.openlocfilehash: 6f7a03e16b260117c6ee27b86ec0e55b5346e301
ms.sourcegitcommit: 9061fcf40c218ebe88911783f357b7df278846db
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/28/2018
ms.locfileid: "21353708"
---
# <a name="transport-agent-concepts-in-exchange-2013"></a><span data-ttu-id="233ca-103">Exchange 2013 におけるトランスポート エージェントの概念</span><span class="sxs-lookup"><span data-stu-id="233ca-103">Transport agent concepts in Exchange 2013</span></span>

<span data-ttu-id="233ca-104">トランスポート エージェントのパイプラインとサーバーの役割のアーキテクチャでは、Exchange 2013 に与える影響について、トランスポート エージェントの開発とトランスポート エージェントの開発に使用できるクラスについての情報を検索します。</span><span class="sxs-lookup"><span data-stu-id="233ca-104">Find information about how the transport agent pipeline and server role architecture in Exchange 2013 affect transport agent development, and the classes that you can use to develop transport agents.</span></span> 
  
<span data-ttu-id="233ca-105">**に適用されます:** Exchange Server 2013</span><span class="sxs-lookup"><span data-stu-id="233ca-105">**Applies to:** Exchange Server 2013</span></span> 
  
<span data-ttu-id="233ca-106">イベントを登録して、トランスポート パイプラインを通過するときに、メッセージに対してアクションを実行するトランスポート エージェントを実装するために Exchange Server 2013 で提供されるクラス ライブラリを使用できます。</span><span class="sxs-lookup"><span data-stu-id="233ca-106">You can use the class library provided in Exchange Server 2013 to implement transport agents that register for events and take actions on messages as they pass through the transport pipeline.</span></span> <span data-ttu-id="233ca-107">トランスポート エージェントは、メッセージを変更し、コンテンツの変換にも使用できます。</span><span class="sxs-lookup"><span data-stu-id="233ca-107">You can also use transport agents to modify messages and convert content.</span></span> 
  
<span data-ttu-id="233ca-p102">この記事では、トランスポート エージェントとトランスポート パイプライン アーキテクチャに関する情報を提供します。トランスポート パイプラインのアーキテクチャについて理解することは重要です。そうすることで、組織のニーズに合わせてトランスポートの動作を変更できるようになります。この記事では、トランスポート エージェントに影響する Exchange 2013 アーキテクチャの変更内容と、トランスポート エージェントの開発に使用できるクラスに関する情報についても提供します。 </span><span class="sxs-lookup"><span data-stu-id="233ca-p102">This article provides information about transport agents and the transport pipeline architecture. It is important to understand the architecture of the transport pipeline so that you can modify transport behavior to meet your organization's needs. This article also provides information about changes in the Exchange 2013 architecture that affect transport agents and the classes that you can use to develop transport agents.</span></span> 
  
## <a name="transport-agents-in-the-transport-pipeline"></a><span data-ttu-id="233ca-111">トランスポート パイプライン内のトランスポート エージェント</span><span class="sxs-lookup"><span data-stu-id="233ca-111">Transport agents in the transport pipeline</span></span>
<span data-ttu-id="233ca-112"><a name="Pipeline"> </a></span><span class="sxs-lookup"><span data-stu-id="233ca-112"></span></span>

<span data-ttu-id="233ca-113">トランスポート エージェントは、次に示す 3 つのクラスのいずれかから派生します。</span><span class="sxs-lookup"><span data-stu-id="233ca-113">Transport agents are derived from one of the following three classes:</span></span>
  
- [<span data-ttu-id="233ca-114">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-114">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)
- [<span data-ttu-id="233ca-115">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-115">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)
- [<span data-ttu-id="233ca-116">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-116">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)
    
<span data-ttu-id="233ca-p103">トランスポート パイプラインとは、Exchange 2013 組織の境界内でのメッセージ データの流れのことを意味します。パイプラインは、次の表に示したサービスによって成立します。</span><span class="sxs-lookup"><span data-stu-id="233ca-p103">The transport pipeline refers to the flow of message data within the boundaries of an Exchange 2013 organization. The pipeline consists of the services listed in the following table.</span></span>
  
<span data-ttu-id="233ca-119">**表 1 です。トランスポート パイプライン サービス**</span><span class="sxs-lookup"><span data-stu-id="233ca-119">**Table 1. Transport pipeline services**</span></span>

|<span data-ttu-id="233ca-120">**サービス**</span><span class="sxs-lookup"><span data-stu-id="233ca-120">**Service**</span></span>|<span data-ttu-id="233ca-121">**説明**</span><span class="sxs-lookup"><span data-stu-id="233ca-121">**Description**</span></span>|<span data-ttu-id="233ca-122">**サポートされるクラス**</span><span class="sxs-lookup"><span data-stu-id="233ca-122">**Classes supported**</span></span>|
|:-----|:-----|:-----|
|<span data-ttu-id="233ca-123">フロント エンド トランスポート </span><span class="sxs-lookup"><span data-stu-id="233ca-123">Front End Transport</span></span>  <br/> |<span data-ttu-id="233ca-124">すべての[クライアント アクセス サーバー](http://technet.microsoft.com/en-us/library/dd298114%28v=exchg.150%29.aspx)上で実行し、すべて受信および送信外部 SMTP トラフィックを Exchange 2013 組織のステートレス プロキシとして機能します。</span><span class="sxs-lookup"><span data-stu-id="233ca-124">Runs on all [Client Access servers](http://technet.microsoft.com/en-us/library/dd298114%28v=exchg.150%29.aspx) and acts as a stateless proxy for all inbound and outbound external SMTP traffic for the Exchange 2013 organization.</span></span> <span data-ttu-id="233ca-125">フロント エンド トランスポート サービスは、メッセージ コンテンツを検査またはキューにメッセージをローカルでは。</span><span class="sxs-lookup"><span data-stu-id="233ca-125">The Front End Transport service doesn't inspect message content or queue any messages locally.</span></span> <span data-ttu-id="233ca-126">これは、[メールボックス サーバー](http://technet.microsoft.com/en-us/library/jj150491%28v=exchg.150%29.aspx)上のトランスポート サービスと通信します。</span><span class="sxs-lookup"><span data-stu-id="233ca-126">It communicates with the Transport service on a [Mailbox server](http://technet.microsoft.com/en-us/library/jj150491%28v=exchg.150%29.aspx).</span></span>  <br/> |[<span data-ttu-id="233ca-127">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-127">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="233ca-128">Transport</span><span class="sxs-lookup"><span data-stu-id="233ca-128">Transport</span></span>  <br/> |<span data-ttu-id="233ca-129">すべてのメールボックス サーバーで実行し、Exchange Server 2010 の[ハブ トランスポート サーバー](http://technet.microsoft.com/en-us/library/bb123494%28v=exchg.141%29.aspx)の役割に似ています。</span><span class="sxs-lookup"><span data-stu-id="233ca-129">Runs on all Mailbox servers and is similar to the [Hub Transport server](http://technet.microsoft.com/en-us/library/bb123494%28v=exchg.141%29.aspx) role in Exchange Server 2010.</span></span> <span data-ttu-id="233ca-130">トランスポート サービスは、それ自体と、メールボックス トランスポート サービスとフロント エンド トランスポート サービス間のメッセージをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="233ca-130">The Transport service routes messages between itself and the Mailbox Transport and Front End Transport services.</span></span> <span data-ttu-id="233ca-131">このサービスはメールボックス データベースと直接通信しません。</span><span class="sxs-lookup"><span data-stu-id="233ca-131">This service does not communicate directly with mailbox databases.</span></span>  <br/> |[<span data-ttu-id="233ca-132">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-132">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> [<span data-ttu-id="233ca-133">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-133">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> [<span data-ttu-id="233ca-134">DeliveryAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-134">DeliveryAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) <br/> |
|<span data-ttu-id="233ca-135">メールボックス トランスポート</span><span class="sxs-lookup"><span data-stu-id="233ca-135">Mailbox Transport</span></span>  <br/> |<span data-ttu-id="233ca-136">すべてのメールボックス サーバー上で実行され、2 つの独立したサービスで構成されています: メールボックス トランスポートの送信およびメールボックス トランスポート配信します。</span><span class="sxs-lookup"><span data-stu-id="233ca-136">Runs on all Mailbox servers and consists of two separate services: Mailbox Transport Submission and Mailbox Transport Delivery.</span></span> <span data-ttu-id="233ca-137">メールボックス トランスポート配信では、トランスポート サービスから SMTP メッセージを受信し、メッセージを配信するのには、Exchange リモート プロシージャ コール (RPC) を使用してメールボックス データベースに接続します。</span><span class="sxs-lookup"><span data-stu-id="233ca-137">Mailbox Transport Delivery receives SMTP messages from the Transport service, and connects to the mailbox database by using an Exchange remote procedure call (RPC) to deliver the message.</span></span> <span data-ttu-id="233ca-138">メールボックス トランスポートの送信は、メッセージを取得するために RPC を使用してメールボックス データベースに接続し、SMTP 経由でトランスポート サービスにメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="233ca-138">Mailbox Transport Submission connects to the mailbox database using RPC to retrieve messages, and submits the messages via SMTP to the Transport service.</span></span>  <br/> |<span data-ttu-id="233ca-139">なし</span><span class="sxs-lookup"><span data-stu-id="233ca-139">None.</span></span>  <br/> |
   
### <a name="transport-events"></a><span data-ttu-id="233ca-140">トランスポート イベント</span><span class="sxs-lookup"><span data-stu-id="233ca-140">Transport events</span></span>
<span data-ttu-id="233ca-141"><a name="Events"> </a></span><span class="sxs-lookup"><span data-stu-id="233ca-141"></span></span>

<span data-ttu-id="233ca-p107">トランスポート エージェントは、まずイベントを登録して、そのイベントが発生したときにアクションを起こすことで実装します。3 種類のそれぞれのエージェントで、異なるイベントのセットを登録できます。</span><span class="sxs-lookup"><span data-stu-id="233ca-p107">You implement transport agents by first registering for an event, and then taking an action when that event fires. Each of the three agent types can register for a different set of events.</span></span>
  
<span data-ttu-id="233ca-144">次の図は、トランスポート エージェントがトランスポート パイプラインのどの部分でイベントを登録できるかを示しています。</span><span class="sxs-lookup"><span data-stu-id="233ca-144">The following figure shows where in the transport pipeline transport agents can register for events.</span></span>
  
<span data-ttu-id="233ca-145">**図 1 です。トランスポート イベント**</span><span class="sxs-lookup"><span data-stu-id="233ca-145">**Figure 1. Transport events**</span></span>

![トランスポート パイプラインを介したメッセージ フロー、および各エージェントが登録できるイベントを示すイメージ。SmtpReceivedAgent の SMTP イベントから始まり、RoutingAgent の Categorizor イベント、そして最後に DeliveryAgent の配信イベントが続きます。](media/TAConceptsFig1.png)
  
<span data-ttu-id="233ca-147">メッセージがトランスポート パイプラインに入る、 [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx)クラスから派生したトランスポート エージェントは、任意のエージェントが登録されている SMTP イベントの中にメッセージで動作できます。</span><span class="sxs-lookup"><span data-stu-id="233ca-147">When a message enters the transport pipeline, a transport agent derived from the [SmtpReceiveAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) class can act on the message during any of the SMTP events that the agent registered for.</span></span> <span data-ttu-id="233ca-148">[RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx)クラスから派生したエージェントの登録されている 4 つのカテゴライザー イベントのいずれかで動作します。</span><span class="sxs-lookup"><span data-stu-id="233ca-148">An agent derived from the [RoutingAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) class can act on any of the four categorizer events that it has registered for.</span></span> <span data-ttu-id="233ca-149">[DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx)クラスから派生したエージェントは、メッセージの配信イベントを登録したことのいずれかの中に動作できます。</span><span class="sxs-lookup"><span data-stu-id="233ca-149">An agent derived from the [DeliveryAgent](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Delivery.DeliveryAgent.aspx) class can act on a message during any of the delivery events that it has registered for.</span></span> 
  
## <a name="transport-agents-and-server-roles"></a><span data-ttu-id="233ca-150">トランスポート エージェントとサーバーの役割</span><span class="sxs-lookup"><span data-stu-id="233ca-150">Transport agents and server roles</span></span>
<span data-ttu-id="233ca-151"><a name="ServerRoles"> </a></span><span class="sxs-lookup"><span data-stu-id="233ca-151"></span></span>

<span data-ttu-id="233ca-152">サーバーの役割のアーキテクチャを変更 Exchange 2013 に影響を与えるトランスポート エージェントおよびトランスポート エージェントが行うことができます。</span><span class="sxs-lookup"><span data-stu-id="233ca-152">Changes to the server role architecture in Exchange 2013 affect transport agents and what your transport agents can do.</span></span> <span data-ttu-id="233ca-153">Exchange 2013 には、次のサーバーの役割が含まれています。</span><span class="sxs-lookup"><span data-stu-id="233ca-153">Exchange 2013 includes the following server roles:</span></span>
  
- <span data-ttu-id="233ca-p110">メールボックス サーバー: クライアント アクセス プロトコル、トランスポート サービス、メールボックス データベース、ユニファイド メッセージング コンポーネントが含まれます。メールボックス サーバーは、Active Directory ドメイン サービス (AD DS)、クライアント アクセス サーバー、および Outlook などのメール クライアントと直接通信します。</span><span class="sxs-lookup"><span data-stu-id="233ca-p110">Mailbox server — Includes Client Access protocols, the Transport service, mailbox databases, and Unified Messaging components. The Mailbox server communicates directly with Active Directory Domain Services (AD DS), Client Access servers, and mail clients such as Outlook.</span></span>
    
- <span data-ttu-id="233ca-156">クライアント アクセス サーバー: 認証、制限付きリダイレクト、プロキシ サービス、およびクライアント アクセス プロトコル (HTTP、POP、IMAP、SMTP など) を提供します。</span><span class="sxs-lookup"><span data-stu-id="233ca-156">Client Access server — Provides authentication, limited redirection, proxy services, and client access protocols such as HTTP, POP, IMAP, and SMTP.</span></span>
    
- <span data-ttu-id="233ca-p111">エッジ トランスポート サーバー: 電子メールを組織の内外にルーティングします。エッジ トランスポート サーバーは、通常、Exchange トポロジの境界に配置されます。</span><span class="sxs-lookup"><span data-stu-id="233ca-p111">Edge Transport server — Routes email into and out of an organization. Edge Transport servers typically sit at the perimeter of an Exchange topology.</span></span>
    
<span data-ttu-id="233ca-p112">この統合構造により、Exchange 2013 環境に展開する必要のあるサーバー数が少なくなります。管理者はメールボックス サーバーが含まれる Active Directory サイトごとにハブ トランスポート サーバーとクライアント アクセス サーバーを展開する必要がなくなりました。また、新しい機能を利用するために、サーバーの役割をすべて更新するという必要もなくなりました。</span><span class="sxs-lookup"><span data-stu-id="233ca-p112">This consolidated structure reduces the number of servers that need to be deployed in an Exchange 2013 environment. Administrators no longer have to deploy Hub Transport and Client Access servers in every Active Directory site that includes a Mailbox server, and they no longer need to update all server roles in order to take advantage of new functionality.</span></span>
  
<span data-ttu-id="233ca-p113">このようなサーバーの役割アーキテクチャに対する変更は、カスタムのエージェントがパイプラインのどの部分でイベントに応答できるかに影響を及ぼす可能性があります。Exchange 2013 よりも前の Exchange の各バージョンに対応したトランスポート エージェントを作成してある場合は、アーキテクチャの変更点を確認して、カスタムのエージェントに変更を加える必要があるかどうかを判断してください。</span><span class="sxs-lookup"><span data-stu-id="233ca-p113">These changes to the server role architecture can potentially affect where in the pipeline your agent can respond to events. If you have created transport agents for versions of Exchange earlier than Exchange 2013, be sure to review the architectural changes to determine whether you need to make any changes to your agents.</span></span>
  
<span data-ttu-id="233ca-p114">次の図は、Exchange 2013 のアーキテクチャ上の変更点が、どのようにトランスポート パイプラインを合理化および統合化しているかについて示しています。この図では、クライアント アクセス サーバーに「CAS」というラベルが付けられています。また、メールボックス サーバーには「MBX」というラベルが付けられています。</span><span class="sxs-lookup"><span data-stu-id="233ca-p114">The following figure shows how the architectural changes in Exchange 2013 result in a streamlined, consolidated transport pipeline. In this figure, Client Access servers are labeled CAS. And Mailbox servers are labeled MBX.</span></span>
  
<span data-ttu-id="233ca-166">**図 2 になります。Exchange 2013 サーバーの役割のアーキテクチャ**</span><span class="sxs-lookup"><span data-stu-id="233ca-166">**Figure 2. Exchange 2013 server role architecture**</span></span>

![外部のファイアウォールを通過するクライアント トラフィックを示すイメージ。左側にはレイヤー 4 の負荷分散から統合 CAS 配列にトラフィックを渡すエッジ トランスポートがあり、右側にはデータベース アクセシビリティ グループの一連のメールボックス サーバーがあります。](media/Transport_Agent_Concepts_Fig_3.png)
  
<span data-ttu-id="233ca-168">次の図は、Exchange 2013 のサーバーの役割間での相互作用を示しています。</span><span class="sxs-lookup"><span data-stu-id="233ca-168">The following figure shows the interactions between the Exchange 2013 server roles.</span></span>
  
<span data-ttu-id="233ca-169">**図 3 です。メールボックスおよびクライアント アクセス サーバー間のやり取り**</span><span class="sxs-lookup"><span data-stu-id="233ca-169">**Figure 3. Mailbox and Client Access server interactions**</span></span>

![CAS に 4 つのターゲット (IIS/HTTP Proxy、POP/IMAP、SMTP、および UM) が存在するレイヤー 4 の負荷分散を通過するクライアント トラフィックから矢印が始まるやり取りを示すイメージ。矢印は、メールボックス ストアのコンプリメンタリ ターゲットを通過します。](media/Transport_Agent_Concepts_Fig_4.png)
  
<span data-ttu-id="233ca-172">Exchange 2013 サーバーの役割のアーキテクチャの変更の詳細については、 [what ' s New Exchange 2013](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx)では、 [Exchange 2013 のアーキテクチャ](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="233ca-172">For more information about changes in the Exchange 2013 server role architecture, see [Exchange 2013 architecture](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx#BKMK_Arch) in [What's New in Exchange 2013](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx).</span></span> 
  
## <a name="transport-agent-classes"></a><span data-ttu-id="233ca-173">トランスポート エージェントのクラス</span><span class="sxs-lookup"><span data-stu-id="233ca-173">Transport agent classes</span></span>
<span data-ttu-id="233ca-174"><a name="Create"> </a></span><span class="sxs-lookup"><span data-stu-id="233ca-174"></span></span>

<span data-ttu-id="233ca-p116">カスタムのトランスポート エージェントの派生元クラスにより、そのエージェントで登録できるイベントが決まります。通常、カスタムのエージェントには、1 つのエージェント クラス、1 つのエージェント ファクトリ、1 つ以上のイベント ハンドラー、およびエージェントで処理するアクションを実行するコードが含まれています。</span><span class="sxs-lookup"><span data-stu-id="233ca-p116">The class your transport agent derives from determines the events for which your agent can register. Your agent will typically contain an agent class, an agent factory, one or more event handlers, and the code that performs the actions that you want your agent to take.</span></span>
  
<span data-ttu-id="233ca-177">次の表は、それぞれのエージェントの種類の派生元になるクラスを示しています。</span><span class="sxs-lookup"><span data-stu-id="233ca-177">The following table lists the classes from which to derive for each agent type.</span></span>
  
<span data-ttu-id="233ca-178">**表 2 になります。エージェント クラス**</span><span class="sxs-lookup"><span data-stu-id="233ca-178">**Table 2. Agent classes**</span></span>

||||
|:-----|:-----|:-----|
|<span data-ttu-id="233ca-179">エージェントの種類</span><span class="sxs-lookup"><span data-stu-id="233ca-179">Agent type</span></span>  <br/> |<span data-ttu-id="233ca-180">ファクトリの基底クラス</span><span class="sxs-lookup"><span data-stu-id="233ca-180">Factory base class</span></span>  <br/> |<span data-ttu-id="233ca-181">エージェントの基底クラス</span><span class="sxs-lookup"><span data-stu-id="233ca-181">Agent base class</span></span>  <br/> |
|<span data-ttu-id="233ca-182">SMTP の受信</span><span class="sxs-lookup"><span data-stu-id="233ca-182">SMTP receive</span></span>  <br/> |[<span data-ttu-id="233ca-183">SmtpReceiveAgentFactory</span><span class="sxs-lookup"><span data-stu-id="233ca-183">SmtpReceiveAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgentFactory.aspx) <br/> |[<span data-ttu-id="233ca-184">SmtpReceiveAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-184">SmtpReceiveAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Smtp.SmtpReceiveAgent.aspx) <br/> |
|<span data-ttu-id="233ca-185">ルーティング</span><span class="sxs-lookup"><span data-stu-id="233ca-185">Routing</span></span>  <br/> |[<span data-ttu-id="233ca-186">RoutingAgentFactory</span><span class="sxs-lookup"><span data-stu-id="233ca-186">RoutingAgentFactory</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgentFactory.aspx) <br/> |[<span data-ttu-id="233ca-187">RoutingAgent</span><span class="sxs-lookup"><span data-stu-id="233ca-187">RoutingAgent</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Routing.RoutingAgent.aspx) <br/> |
|<span data-ttu-id="233ca-188">配信</span><span class="sxs-lookup"><span data-stu-id="233ca-188">Delivery</span></span>  <br/> |<span data-ttu-id="233ca-189">[DeliveryAgentFactory\<マネージャー\>](https://msdn.microsoft.com/en-us/library/dd877550(v=exchg.150).aspx)</span><span class="sxs-lookup"><span data-stu-id="233ca-189">[DeliveryAgentFactory\<Manager\>](https://msdn.microsoft.com/en-us/library/dd877550(v=exchg.150).aspx)</span></span> <br/> |<span data-ttu-id="233ca-190">[DeliveryAgent](https://msdn.microsoft.com/en-us/library/microsoft.exchange.data.transport.delivery.deliveryagent(v=exchg.150).aspx)</span><span class="sxs-lookup"><span data-stu-id="233ca-190">[DeliveryAgent](https://msdn.microsoft.com/en-us/library/microsoft.exchange.data.transport.delivery.deliveryagent(v=exchg.150).aspx)</span></span> <br/> |
   
<span data-ttu-id="233ca-p117">これらのファクトリとエージェントの基底クラスには、トランスポート イベントとメッセージへのアクセスに使用できるプロパティとメソッドが用意されています。カスタムのエージェントには、これらのクラスから継承するクラスを実装します。エージェント ファクトリ派生クラスでは、**CreateAgent** メソッドをオーバーライドして、カスタムのエージェント クラスの新しいインスタンスを返すようにします。</span><span class="sxs-lookup"><span data-stu-id="233ca-p117">These factory and agent base classes provide properties and methods that you can use to access transport events and messages. Implement classes in your agent that inherit from these classes. In the agent factory derived class, override the **CreateAgent** method so that it returns a new instance of your agent class.</span></span> 
  
<span data-ttu-id="233ca-194">イベントに渡される引数は、プロパティと、基になるメッセージの内容を変更するのにを使用することができる[なか](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx)クラスのインスタンスを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="233ca-194">Arguments passed to the events can contain an instance of the [EmailMessage](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Transport.Email.EmailMessage.aspx) class, which you can use to change the properties and contents of the underlying message.</span></span> <span data-ttu-id="233ca-195">メッセージのすべての情報は、各イベントで使用できます。</span><span class="sxs-lookup"><span data-stu-id="233ca-195">Not all message information is available in each event.</span></span> <span data-ttu-id="233ca-196">どのエージェントを決定する必要があり、どのイベントが実行するタスクに最適です。</span><span class="sxs-lookup"><span data-stu-id="233ca-196">You must determine which agent and which event is best for the task you want to accomplish.</span></span> 
  
<span data-ttu-id="233ca-197">次に示す名前空間には、トランスポート パイプライン内のメッセージを読み取り、書き込み、および変更するために使用できる型が含まれています。</span><span class="sxs-lookup"><span data-stu-id="233ca-197">The following namespaces contain types that you can use to read, write, and modify messages in the transport pipeline:</span></span>
  
- [<span data-ttu-id="233ca-198">Microsoft.Exchange.Data.Mime.Encoders</span><span class="sxs-lookup"><span data-stu-id="233ca-198">Microsoft.Exchange.Data.Mime.Encoders</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.Encoders.aspx)
    
- [<span data-ttu-id="233ca-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span><span class="sxs-lookup"><span data-stu-id="233ca-199">Microsoft.Exchange.Data.ContentTypes.iCalendar</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.iCalendar.aspx)
    
- [<span data-ttu-id="233ca-200">Microsoft.Exchange.Data.Mime</span><span class="sxs-lookup"><span data-stu-id="233ca-200">Microsoft.Exchange.Data.Mime</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.Mime.aspx)
    
- [<span data-ttu-id="233ca-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span><span class="sxs-lookup"><span data-stu-id="233ca-201">Microsoft.Exchange.Data.ContentTypes.Tnef</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.Tnef.aspx)
    
- [<span data-ttu-id="233ca-202">Microsoft.Exchange.Data.ContentTypes.vCard</span><span class="sxs-lookup"><span data-stu-id="233ca-202">Microsoft.Exchange.Data.ContentTypes.vCard</span></span>](https://msdn.microsoft.com/library/Microsoft.Exchange.Data.ContentTypes.vCard.aspx)
    
<span data-ttu-id="233ca-203">後[インストールしエージェントを管理する](http://technet.microsoft.com/en-us/library/bb125175%28v=exchg.150%29.aspx)Exchange 管理シェルを使用して、トランスポート エージェントを作成します。</span><span class="sxs-lookup"><span data-stu-id="233ca-203">After you write your transport agent, you [install and manage your agent](http://technet.microsoft.com/en-us/library/bb125175%28v=exchg.150%29.aspx) by using the Exchange Management Shell.</span></span> <span data-ttu-id="233ca-204">詳細については、 [Exchange 2013 のトランスポート エージェントを作成する](creating-transport-agents-for-exchange-2013.md)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="233ca-204">For more information, see [Creating transport agents for Exchange 2013](creating-transport-agents-for-exchange-2013.md).</span></span> 
  
## <a name="see-also"></a><span data-ttu-id="233ca-205">関連項目</span><span class="sxs-lookup"><span data-stu-id="233ca-205">See also</span></span>

- [<span data-ttu-id="233ca-206">Exchange のトランスポート エージェント</span><span class="sxs-lookup"><span data-stu-id="233ca-206">Transport agents in Exchange</span></span>](transport-agents-in-exchange-2013.md)    
- [<span data-ttu-id="233ca-207">Exchange 2013 のトランスポート エージェントのリファレンス</span><span class="sxs-lookup"><span data-stu-id="233ca-207">Transport agent reference for Exchange 2013</span></span>](transport-agent-reference-for-exchange-2013.md)   
- [<span data-ttu-id="233ca-208">Exchange 2013 トランスポート パイプライン内のメッセージの読み取りおよび変更</span><span class="sxs-lookup"><span data-stu-id="233ca-208">Reading and modifying messages in the Exchange 2013 transport pipeline</span></span>](reading-and-modifying-messages-in-the-exchange-2013-transport-pipeline.md)    
- [<span data-ttu-id="233ca-209">Exchange 2013 の新機能</span><span class="sxs-lookup"><span data-stu-id="233ca-209">What's New in Exchange 2013</span></span>](http://technet.microsoft.com/en-us/library/jj150540%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="233ca-210">Exchange 2013 サーバーの役割のアーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="233ca-210">Exchange 2013 Server Role Architecture</span></span>](http://blogs.technet.com/b/exchange/archive/2013/01/23/exchange-2013-server-role-architecture.aspx)    
- [<span data-ttu-id="233ca-211">メールボックスおよびクライアント アクセス サーバー</span><span class="sxs-lookup"><span data-stu-id="233ca-211">Mailbox and Client Access Servers</span></span>](http://technet.microsoft.com/en-us/library/jj150519%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="233ca-212">Exchange Server 2013 のメールの流れ</span><span class="sxs-lookup"><span data-stu-id="233ca-212">Exchange Server 2013 Mail Flow</span></span>](http://technet.microsoft.com/en-us/library/aa996349.aspx)
- [<span data-ttu-id="233ca-213">Exchange Server 2013年のメールのルーティング</span><span class="sxs-lookup"><span data-stu-id="233ca-213">Exchange Server 2013 Mail Routing</span></span>](http://technet.microsoft.com/en-us/library/aa998825%28v=exchg.150%29.aspx)   
- [<span data-ttu-id="233ca-214">Exchange Server PowerShell (Exchange 管理シェル)</span><span class="sxs-lookup"><span data-stu-id="233ca-214">Exchange Server PowerShell (Exchange Management Shell)</span></span>](https://docs.microsoft.com/en-us/powershell/exchange/exchange-server/exchange-management-shell?view=exchange-ps)
    

